<?php
/**
 * {license_notice}
 *
 * @category    design
 * @copyright   {copyright}
 * @license     {license_link}
 */
?>

<?php $entityCollection = $this->getEntityCollection(); ?>
<?php echo $this->getMessagesBlock()->getGroupedHtml();?>

<?php if ($entityCollection->getSize()):?>
    <div class="giftregistry toolbar">
        <?php echo $this->getChildHtml('pager'); ?>
    </div>

    <table id="giftregistry-table" class="data table giftregistry">
        <thead>
            <tr>
                <th class="col event"><?php echo __('Event'); ?></th>
                <th class="col create"><?php echo __('Created On'); ?></th>
                <th class="col message"><?php echo __('Message'); ?></th>
                <th class="col actions"><?php echo __('Action'); ?></th>
            </tr>
        </thead>
        <tbody>
            <?php foreach($entityCollection as $item): ?>
                <tr>
                    <td class="col event" title="<?php echo $this->getEscapedTitle($item)?>"><?php echo $this->helper('Magento\Core\Helper\String')->truncate($this->getEscapedTitle($item), 70)?></td>
                    <td class="col create"><?php echo $this->getFormattedDate($item) ?></td>
                    <td class="col message"><?php echo $this->getEscapedMessage($item)?></td>
                    <td class="col actions">
                        <a href="<?php echo $this->getItemsUrl($item)?>" class="action manage" title="<?php echo __('Manage Items') ?>"><?php echo __('Manage Items') ?></a>
                        <a href="<?php echo $this->getShareUrl($item)?>" class="action share" title="<?php echo __('Share') ?>"><?php echo __('Share') ?></a>
                        <a href="<?php echo $this->getEditUrl($item)?>" class="action edit" title="<?php echo __('Edit') ?>"><?php echo __('Edit') ?></a>
                        <a href="<?php echo $this->getDeleteUrl($item)?>" class="action delete" title="<?php echo __('Delete') ?>" onclick="return confirm('<?php echo __('Are you sure you want to delete this gift registry?'); ?>');"><?php echo __('Delete') ?></a>
                    </td>
                </tr>
            <?php endforeach; ?>
        </tbody>
    </table>

    <div class="giftregistry toolbar">
        <?php echo $this->getChildHtml('pager'); ?>
    </div>
<?php else:?>
    <p class="no giftregistry"><?php echo __('No gift registries have been created.'); ?></p>
<?php endif;?>

<div class="actions">
    <div class="secondary">
        <a href="<?php echo $this->escapeUrl($this->getBackUrl()) ?>" class="action back"><span><?php echo __('Back') ?></span></a>
    </div>
    <div class="primary">
        <?php if ($this->canAddNewEntity()):?>
            <a href="<?php echo $this->escapeUrl($this->getAddUrl()) ?>" class="action primary add">
                <span><?php echo __('Add New') ?></span>
            </a>
        <?php endif;?>
    </div>
</div>
