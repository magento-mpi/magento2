<?xml version="1.0"?>
<!--
/**
 * Magento Enterprise Edition
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magento Enterprise Edition License
 * that is bundled with this package in the file LICENSE_EE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.magentocommerce.com/license/enterprise-edition
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     enterprise_default
 * @copyright   Copyright (c) 2010 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://www.magentocommerce.com/license/enterprise-edition
 */

-->
<layout version="0.1.0">
    <checkout_cart_index>
        <reference name="checkout.cart.methods">
            <block type="Enterprise_GiftRegistry_Block_Cart_Link" name="giftregistry.cart.link" template="giftregistry/cart/link.phtml"/>
        </reference>
        <reference name="additional.product.info">
            <block type="Enterprise_GiftRegistry_Block_Cart_Product_Mark" name="giftregistry.product.mark" template="giftregistry/cart/product/mark.phtml"/>
        </reference>
    </checkout_cart_index>

    <wishlist_index_index>
        <block type="Enterprise_GiftRegistry_Block_Wishlist_View" name="giftregistry.customer.wishlist" template="giftregistry/wishlist/view.phtml">
            <block type="Mage_Wishlist_Block_Customer_Wishlist_Item_Options" name="customer.wishlist.item.options" as="item_options"/>
        </block>
    </wishlist_index_index>

    <enterprise_giftregistry_index_index>
        <update handle="customer_account"/>
        <reference name="my.account.wrapper">
            <block type="Enterprise_GiftRegistry_Block_Customer_List" name="giftregistry.customer.list" template="giftregistry/customer/list.phtml"></block>
        </reference>
    </enterprise_giftregistry_index_index>

    <enterprise_giftregistry_index_view>
        <update handle="customer_account"/>
        <reference name="my.account.wrapper">
            <block type="Enterprise_Giftregistry_Block_Customer_View" name="giftregistry.customer.view" template="giftregistry/customer/view.phtml"></block>
        </reference>
    </enterprise_giftregistry_index_view>

    <enterprise_giftregistry_index_share>
        <update handle="customer_account"/>
        <reference name="customer_account_navigation">
            <action method="setActive"><path>enterprise_giftregistry/index/index</path></action>
        </reference>
        <reference name="my.account.wrapper">
            <block type="Enterprise_GiftRegistry_Block_Customer_Share" name="giftregistry.customer.share" template="giftregistry/customer/share.phtml"></block>
        </reference>
    </enterprise_giftregistry_index_share>

    <enterprise_giftregistry_index_items>
        <update handle="customer_account"/>
        <reference name="customer_account_navigation">
            <action method="setActive"><path>enterprise_giftregistry/index/index</path></action>
        </reference>
        <reference name="my.account.wrapper">
            <block type="Enterprise_GiftRegistry_Block_Items" name="giftregistry.customer.items" template="giftregistry/customer/items.phtml">
                <action method="addItemRender"><type>default</type><block>Mage_Checkout_Block_Cart_Item_Renderer</block><template>giftregistry/customer/items/default.phtml</template></action>
                <action method="addItemRender"><type>simple</type><block>Mage_Checkout_Block_Cart_Item_Renderer</block><template>giftregistry/customer/items/default.phtml</template></action>
                <action method="addItemRender"><type>grouped</type><block>Mage_Checkout_Block_Cart_Item_Renderer_Grouped</block><template>giftregistry/customer/items/default.phtml</template></action>
                <action method="addItemRender"><type>configurable</type><block>Mage_Checkout_Block_Cart_Item_Renderer_Configurable</block><template>giftregistry/customer/items/default.phtml</template></action>
                <action method="addItemRender"><type>bundle</type><block>Mage_Bundle_Block_Checkout_Cart_Item_Renderer</block><template>giftregistry/customer/items/default.phtml</template></action>
                <action method="addItemRender"><type>giftcard</type><block>Enterprise_GiftCard_Block_Checkout_Cart_Item_Renderer</block><template>giftregistry/customer/items/default.phtml</template>
            </action>
            </block>
        </reference>
    </enterprise_giftregistry_index_items>

     <customer_account>
        <block type="Enterprise_GiftRegistry_Block_Link" name="giftregistry_link_dashboard">
            <action method="addDashboardLink" translate="label" module="Enterprise_GiftRegistry">
                <block>customer_account_navigation</block><name>giftregistry</name><path>enterprise_giftregistry/</path><label>Gift Registry</label>
            </action>
        </block>
    </customer_account>

    <enterprise_giftregistry_search_index>
        <update handle="calendar"/>
        <reference name="left">
            <remove name="giftregistry.quick.search" />
        </reference>
        <reference name="content">
            <block type="Enterprise_GiftRegistry_Block_Search_Form" name="giftregistry.search.form" template="giftregistry/search/form.phtml"></block>
        </reference>
    </enterprise_giftregistry_search_index>

    <enterprise_giftregistry_search_results>
        <update handle="calendar"/>
        <reference name="left">
            <remove name="giftregistry.quick.search" />
        </reference>
        <reference name="content">
            <block type="Enterprise_GiftRegistry_Block_Search_Form" name="giftregistry.search.form" template="giftregistry/search/form.phtml"></block>
            <block type="Enterprise_GiftRegistry_Block_Search_Results" name="giftregistry.search.results" template="giftregistry/search/results.phtml"></block>
        </reference>
    </enterprise_giftregistry_search_results>

    <enterprise_giftregistry_search_advanced>
        <block type="Enterprise_GiftRegistry_Block_Search_Advanced" name="root" template="giftregistry/search/advanced.phtml"></block>
    </enterprise_giftregistry_search_advanced>

    <enterprise_giftregistry_view_index>
        <reference name="root">
            <action method="setTemplate"><template>page/1column.phtml</template></action>
        </reference>
        <reference name="content">
            <block type="Enterprise_GiftRegistry_Block_View" name="enterprise.giftregistry.view" template="giftregistry/view.phtml">
                <block type="Enterprise_GiftRegistry_Block_Items" name="giftregistry_items" template="giftregistry/view/items.phtml">
                    <block type="Mage_Catalog_Block_Product_Price" template="catalog/product/price_msrp_item.phtml" name="enterprise.giftregistry.item.price" />

                    <action method="addItemRender"><type>default</type><block>Mage_Checkout_Block_Cart_Item_Renderer</block><template>giftregistry/view/items/default.phtml</template></action>
                    <action method="addItemRender"><type>simple</type><block>Mage_Checkout_Block_Cart_Item_Renderer</block><template>giftregistry/view/items/default.phtml</template></action>
                    <action method="addItemRender"><type>grouped</type><block>Mage_Checkout_Block_Cart_Item_Renderer_Grouped</block><template>giftregistry/view/items/default.phtml</template></action>
                    <action method="addItemRender"><type>configurable</type><block>Mage_Checkout_Block_Cart_Item_Renderer_Configurable</block><template>giftregistry/view/items/default.phtml</template></action>
                    <action method="addItemRender"><type>bundle</type><block>Mage_Bundle_Block_Checkout_Cart_Item_Renderer</block><template>giftregistry/view/items/default.phtml</template></action>
                    <action method="addItemRender"><type>giftcard</type><block>Enterprise_GiftCard_Block_Checkout_Cart_Item_Renderer</block><template>giftregistry/view/items/default.phtml</template></action>
                </block>
                <block type="Enterprise_GiftRegistry_Block_Customer_Items" name="giftregistry.view.items" template="giftregistry/view/items.phtml"/>
            </block>
        </reference>
        <update handle="MAP_popup" />
        <reference name="product.tooltip">
            <block type="Mage_Page_Block_Html_Wrapper" name="product.info.addtocart.paypal.wrapper" translate="label">
                <block type="Mage_Paypal_Block_Express_Shortcut" name="product.info.addtocart.paypal" template="paypal/express/shortcut.phtml" module="Mage_Paypal">
                    <action method="setIsInCatalogProduct"><value>1</value></action>
                    <action method="setShowOrPosition"><value>after</value></action>
                </block>
            </block>
        </reference>
    </enterprise_giftregistry_view_index>

    <catalog_product_view>
        <reference name="product.info">
            <block type="Enterprise_GiftRegistry_Block_Product_View" name="product.view.block"></block>
        </reference>
    </catalog_product_view>

    <PRODUCT_TYPE_bundle>
        <reference name="product.info">
            <block type="Enterprise_GiftRegistry_Block_Product_View" name="product.customize.button"/>
        </reference>
    </PRODUCT_TYPE_bundle>

    <calendar>
        <reference name="head">
            <action method="addItem"><type>js_css</type><name>calendar/calendar-win2k-1.css</name><params/></action>
            <action method="addItem"><type>js</type><name>calendar/calendar.js</name></action>
            <action method="addItem"><type>js</type><name>calendar/calendar-setup.js</name></action>
        </reference>
        <reference name="content">
            <block type="Mage_Core_Block_Html_Calendar" name="html_calendar" as="html_calendar" template="page/js/calendar.phtml"/>
        </reference>
    </calendar>

    <checkout_onepage_index>
        <reference name="content">
            <block type="Enterprise_GiftRegistry_Block_Customer_Checkout" name="giftregistry.customer.checkout" template="giftregistry/customer/checkout/onepage.phtml"/>
        </reference>
    </checkout_onepage_index>

    <checkout_multishipping_addresses>
        <reference name="content">
            <block type="Enterprise_GiftRegistry_Block_Customer_Checkout" name="giftregistry.customer.checkout" template="giftregistry/customer/checkout/multishipping.phtml"/>
        </reference>
        <reference name="additional.product.info">
            <block type="Enterprise_GiftRegistry_Block_Cart_Product_Mark" name="giftregistry.product.mark" template="giftregistry/cart/product/mark.phtml"/>
        </reference>
    </checkout_multishipping_addresses>

    <checkout_multishipping_shipping>
        <reference name="additional.product.info">
            <block type="Enterprise_GiftRegistry_Block_Cart_Product_Mark" name="giftregistry.product.mark" template="giftregistry/cart/product/mark.phtml"/>
        </reference>
    </checkout_multishipping_shipping>
    <checkout_multishipping_overview>
        <reference name="additional.product.info">
            <block type="Enterprise_GiftRegistry_Block_Cart_Product_Mark" name="giftregistry.product.mark" template="giftregistry/cart/product/mark.phtml"/>
        </reference>
    </checkout_multishipping_overview>

    <enterprise_giftregistry_index_addselect translate="label">
        <label>Customer My Account GiftRegistry Add</label>
        <update handle="customer_account"/>
        <reference name="customer_account_navigation">
            <action method="setActive"><path>enterprise_giftregistry/index/index</path></action>
        </reference>
        <reference name="my.account.wrapper">
            <block type="Enterprise_GiftRegistry_Block_Customer_Edit" name="giftregistry_addselect" template="giftregistry/edit/addselect.phtml"></block>
        </reference>
    </enterprise_giftregistry_index_addselect>

    <enterprise_giftregistry_index_edit translate="label">
        <label>Customer My Account GiftRegistry Edit</label>
        <update handle="customer_account"/>
        <update handle="calendar"/>
        <reference name="customer_account_navigation">
            <action method="setActive"><path>enterprise_giftregistry/index/index</path></action>
        </reference>
        <reference name="my.account.wrapper">
            <block type="Enterprise_GiftRegistry_Block_Customer_Edit" name="giftregistry_edit" template="giftregistry/edit/edit.phtml">
                <action method="addInputTypeTemplate"><type>text</type><template>giftregistry/attributes/text.phtml</template></action>
                <action method="addInputTypeTemplate"><type>region</type><template>giftregistry/attributes/region.phtml</template></action>
                <block type="Enterprise_GiftRegistry_Block_Customer_Edit_Registry" name="giftregistry_edit_registry" template="giftregistry/edit/registry.phtml"/>
                <block type="Enterprise_GiftRegistry_Block_Customer_Edit_Registrants" name="giftregistry_edit_registrants" template="giftregistry/edit/registrants.phtml"/>
                <block type="Enterprise_GiftRegistry_Block_Customer_Address_Edit" name="giftregistry_address_edit" template="giftregistry/address/edit.phtml"/>
            </block>
        </reference>
    </enterprise_giftregistry_index_edit>

    <checkout_onepage_review>
        <reference name="additional.product.info">
            <block type="Enterprise_GiftRegistry_Block_Cart_Product_Mark" name="giftregistry.product.mark" template="giftregistry/cart/product/mark.phtml"/>
        </reference>
    </checkout_onepage_review>

    <enterprise_giftregistry_email_entity_items>
        <block type="Enterprise_GiftRegistry_Block_Email_Items" name="giftregistry.email.items" template="giftregistry/email/items.phtml"></block>
    </enterprise_giftregistry_email_entity_items>
</layout>
