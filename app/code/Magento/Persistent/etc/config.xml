<?xml version="1.0"?>
<!--
/**
 * {license_notice}
 *
 * @category    Magento
 * @package     Magento_Persistent
 * @copyright   {copyright}
 * @license     {license_link}
 */
-->
<config>
    <global>
        <resources>
            <persistent_setup>
                <setup>
                    <module>Magento_Persistent</module>
                </setup>
            </persistent_setup>
        </resources>
    </global>
    <frontend>
        <secure_url>
            <persistent_onepage_register>/persistent/index/saveMethod</persistent_onepage_register>
        </secure_url>
        <routers>
            <persistent>
                <use>standard</use>
                <args>
                    <module>Magento_Persistent</module>
                    <frontName>persistent</frontName>
                </args>
            </persistent>
        </routers>
        <events>
            <customer_login>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer_Session</class>
                        <method>synchronizePersistentOnLogin</method>
                    </persistent>
                </observers>
            </customer_login>
            <customer_logout>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer_Session</class>
                        <method>synchronizePersistentOnLogout</method>
                    </persistent>
                </observers>
            </customer_logout>
            <controller_front_send_response_after>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer_Session</class>
                        <method>synchronizePersistentInfo</method>
                    </persistent>
                </observers>
            </controller_front_send_response_after>
            <controller_action_predispatch_customer_account_loginPost>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer_Session</class>
                        <method>setRememberMeCheckedStatus</method>
                    </persistent>
                </observers>
            </controller_action_predispatch_customer_account_loginPost>
            <controller_action_predispatch_customer_account_createpost>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer_Session</class>
                        <method>setRememberMeCheckedStatus</method>
                    </persistent>
                    <persistent_authenticate>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>customerAuthenticatedEvent</method>
                    </persistent_authenticate>
                </observers>
            </controller_action_predispatch_customer_account_createpost>
            <controller_action_layout_generate_blocks_after>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>applyPersistentData</method>
                    </persistent>
                </observers>
            </controller_action_layout_generate_blocks_after>
            <controller_action_predispatch>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>emulateQuote</method>
                    </persistent>
                    <persistent_session>
                        <class>Magento_Persistent_Model_Observer_Session</class>
                        <method>renewCookie</method>
                    </persistent_session>
                    <persistent_quote>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>checkExpirePersistentQuote</method>
                    </persistent_quote>
                    <persistent_customer>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>emulateCustomer</method>
                    </persistent_customer>
                </observers>
            </controller_action_predispatch>
            <checkout_allow_guest>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>disableGuestCheckout</method>
                    </persistent>
                </observers>
            </checkout_allow_guest>
            <customer_customer_authenticated>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>customerAuthenticatedEvent</method>
                    </persistent>
                </observers>
            </customer_customer_authenticated>
            <controller_action_predispatch_persistent_index_unsetCookie>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>preventClearCheckoutSession</method>
                    </persistent>
                </observers>
            </controller_action_predispatch_persistent_index_unsetCookie>
            <controller_action_postdispatch_persistent_index_unsetCookie>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>makePersistentQuoteGuest</method>
                    </persistent>
                </observers>
            </controller_action_postdispatch_persistent_index_unsetCookie>
            <sales_quote_save_before>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>setQuotePersistentData</method>
                    </persistent>
                </observers>
            </sales_quote_save_before>
            <custom_quote_process>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>setLoadPersistentQuote</method>
                    </persistent>
                </observers>
            </custom_quote_process>
            <controller_action_postdispatch_checkout_onepage_saveBilling>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer_Session</class>
                        <method>setRememberMeCheckedStatus</method>
                    </persistent>
                </observers>
            </controller_action_postdispatch_checkout_onepage_saveBilling>
            <customer_register_success>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>removePersistentCookie</method>
                    </persistent>
                </observers>
            </customer_register_success>
            <controller_action_predispatch_paypal_express_start>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>preventExpressCheckout</method>
                    </persistent>
                </observers>
            </controller_action_predispatch_paypal_express_start>
            <controller_action_predispatch_paypaluk_express_start>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>preventExpressCheckout</method>
                    </persistent>
                </observers>
            </controller_action_predispatch_paypaluk_express_start>
            <controller_action_predispatch_googlecheckout_redirect_checkout>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>preventExpressCheckout</method>
                    </persistent>
                </observers>
            </controller_action_predispatch_googlecheckout_redirect_checkout>
            <controller_action_predispatch_checkout_multishipping_index>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>preventExpressCheckout</method>
                    </persistent>
                </observers>
            </controller_action_predispatch_checkout_multishipping_index>
            <render_block>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>applyBlockPersistentData</method>
                    </persistent>
                </observers>
            </render_block>
            <update_customer_cookies>
                <observers>
                    <persistent>
                        <class>Magento_Persistent_Model_Observer</class>
                        <method>updateCustomerCookies</method>
                    </persistent>
                </observers>
            </update_customer_cookies>
        </events>
        <translate>
            <modules>
                <Magento_Persistent>
                    <files>
                        <default>Magento_Persistent.csv</default>
                    </files>
                </Magento_Persistent>
            </modules>
        </translate>
    </frontend>
    <adminhtml>
        <translate>
            <modules>
                <Magento_Persistent>
                    <files>
                        <default>Magento_Persistent.csv</default>
                    </files>
                </Magento_Persistent>
            </modules>
        </translate>
    </adminhtml>
    <default>
        <persistent>
            <options>
                <enabled>0</enabled>
                <lifetime>31536000</lifetime>
                <remember_enabled>1</remember_enabled>
                <remember_default>1</remember_default>
                <logout_clear>1</logout_clear>
                <shopping_cart>1</shopping_cart>
            </options>
        </persistent>
    </default>
    <crontab>
        <jobs>
            <persistent_clear_expired>
                <schedule>
                    <cron_expr>0 0 * * *</cron_expr>
                </schedule>
                <run>
                    <model>Magento_Persistent_Model_Observer::clearExpiredCronJob</model>
                </run>
            </persistent_clear_expired>
        </jobs>
    </crontab>
</config>
