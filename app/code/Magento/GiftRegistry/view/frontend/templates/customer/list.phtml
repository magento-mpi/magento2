<?php
/**
 * {license_notice}
 *
 * @copyright   {copyright}
 * @license     {license_link}
 */
?>

<?php $entityCollection = $this->getEntityCollection(); ?>

<?php if ($entityCollection->getSize()):?>
    <?php if ($this->getChildHtml('pager')): ?>
        <div class="toolbar giftregistry-toolbar top">
            <?php echo $this->getChildHtml('pager'); ?>
        </div>
    <?php endif;?>

    <div class="table-wrapper giftregistry">
        <table id="giftregistry-table" class="data table table-giftregistry">
            <caption class="table caption"><?php echo __('Gift Registry') ?></caption>
            <thead>
                <tr>
                    <th scope="col" class="col event"><?php echo __('Event'); ?></th>
                    <th scope="col" class="col create"><?php echo __('Created On'); ?></th>
                    <th scope="col" class="col message"><?php echo __('Message'); ?></th>
                    <th scope="col" class="col actions"><?php echo __('Action'); ?></th>
                </tr>
            </thead>
            <tbody>
                <?php foreach($entityCollection as $item): ?>
                    <tr>
                        <td data-th="<?php echo $this->escapeHtml(__('Event')); ?>" class="col event" title="<?php echo $this->getEscapedTitle($item)?>"><?php echo $this->truncateString($this->getEscapedTitle($item), 70)?></td>
                        <td data-th="<?php echo $this->escapeHtml(__('Created On')); ?>" class="col create"><?php echo $this->getFormattedDate($item) ?></td>
                        <td data-th="<?php echo $this->escapeHtml(__('Message')); ?>" class="col message"><?php echo $this->getEscapedMessage($item)?></td>
                        <td data-th="<?php echo $this->escapeHtml(__('Action')); ?>" class="col actions">
                            <a href="<?php echo $this->getItemsUrl($item)?>" class="action manage" title="<?php echo __('Manage Items') ?>"><?php echo __('Manage Items') ?></a>
                            <a href="<?php echo $this->getShareUrl($item)?>" class="action share" title="<?php echo __('Share') ?>"><?php echo __('Share') ?></a>
                            <a href="<?php echo $this->getEditUrl($item)?>" class="action edit" title="<?php echo __('Edit') ?>"><?php echo __('Edit') ?></a>
                            <a href="<?php echo $this->getDeleteUrl($item)?>" class="action delete" title="<?php echo __('Delete') ?>" onclick="return confirm('<?php echo __('Are you sure you want to delete this gift registry?'); ?>');"><?php echo __('Delete') ?></a>
                        </td>
                    </tr>
                <?php endforeach; ?>
            </tbody>
        </table>
    </div>
    <?php if ($this->getChildHtml('pager')): ?>
        <div class="toolbar giftregistry-toolbar bottom">
            <?php echo $this->getChildHtml('pager'); ?>
        </div>
    <?php endif;?>
<?php else:?>
    <div class="message info empty"><span><?php echo __('No gift registries have been created.'); ?></span></div>
<?php endif;?>

<div class="actions-toolbar">
    <div class="primary">
        <?php if ($this->canAddNewEntity()):?>
            <a href="<?php echo $this->escapeUrl($this->getAddUrl()) ?>" class="action primary add">
                <span><?php echo __('Add New') ?></span>
            </a>
        <?php endif;?>
    </div>
    <div class="secondary">
        <a href="<?php echo $this->escapeUrl($this->getBackUrl()) ?>" class="action back"><span><?php echo __('Back') ?></span></a>
    </div>
</div>
