<?php
/**
 * {license_notice}
 *
 * @category    design
 * @package     Magento_DesignEditor
 * @copyright   {copyright}
 * @license     {license_link}
 */
?>
<?php /** @var $this Magento_DesignEditor_Block_Adminhtml_Editor_Form_Renderer_LogoUploader */ ?>
<?php /** @var $element Magento_DesignEditor_Block_Adminhtml_Editor_Form_Element_LogoUploader */?>
<?php $element = $this->getElement(); ?>
<?php $stores = $this->getStoresList(); ?>

<?php if(null === $stores): ?>
    <?php echo __('Please assign this theme to a store view and upload your store logo.'); ?>
<?php else: ?>
    <?php foreach ($stores as $store): ?>
        <?php $elementId = $element->getHtmlId() . '-' . $store->getId(); ?>
        <div id="<?php echo $elementId; ?>-uploader" class="custom-file">
            <div class="custom-file-for-store-view"><?php echo $store->getName(); ?>:</div>

            <div id="<?php echo $elementId; ?>-container" class="action-add">
                <?php echo $this->getHtml(); ?>
            </div>
            <label for="<?php echo $elementId; ?>"><?php echo __('Upload a Logo'); ?></label>

            <div class="uploaded-file-wrapper">
                <div class="no-display uploaded-image" id="<?php echo $elementId; ?>-template">
                    <div class="file-row">
                        <span class="label">{{name}}</span>
                        <button type="button" class="action-delete" id="{{remove-id}}">
                            <span><?php echo __('Remove'); ?></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            (function($) {
                $(document.getElementById('<?php echo $elementId; ?>-uploader')).quickStyleUploader({
                    uploader_id:   '<?php echo $elementId; ?>',
                    container:     '<?php echo $elementId; ?>-uploader',
                    value:         '<?php echo $this->getLogoImage($store); ?>',
                    url:           '<?php echo $this->getLogoUploadUrl($store); ?>',
                    remove_url:    '<?php echo $this->getLogoRemoveUrl($store); ?>',
                    hide_uploader: false
                });
            })(jQuery);
        </script>
    <?php endforeach; ?>
<?php endif; ?>
