<?xml version="1.0"?>
<!--
/**
 * {license_notice}
 *
 * @copyright   {copyright}
 * @license     {license_link}
 */
-->
<config>
    <type name="Magento\Catalog\Model\Session">
        <param name="sessionName">
            <value>frontend</value>
        </param>
    </type>
    <type name="Magento\Catalog\Model\Resource\Category\Collection">
        <param name="fetchStrategy">
            <instance type="Magento\Data\Collection\Db\FetchStrategy\Cache" />
        </param>
    </type>
    <type name="Magento\Sales\Model\Convert\Quote">
        <plugin name="copy_quote_files_to_order" type="Magento\Catalog\Model\Plugin\QuoteItemProductOption"/>
    </type>
    <virtualType name="compareProductInitSession" type="Magento\Core\App\Action\Plugin\Session">
        <param name="cookieCheckActions">
            <value>
                <compareProductAdd>add</compareProductAdd>
            </value>
        </param>
    </virtualType>
    <type name="Magento\Catalog\Controller\Product\Compare">
        <plugin name="sessionInitializer" type="compareProductInitSession" />
    </type>
    <type name="Magento\Catalog\Block\Navigation">
        <param name="flatIndexer">
            <instance type="Magento\Indexer\Model\IndexerInterface" shared="false"/>
        </param>
    </type>
</config>
