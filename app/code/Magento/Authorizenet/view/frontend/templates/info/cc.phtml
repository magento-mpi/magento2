<?php
/**
 * @copyright Copyright (c) 2014 X.commerce, Inc. (http://www.magentocommerce.com)
 */
?>

<dl class="payment-method">
<?php if (!$this->getHideTitle()): ?>
    <dt class="title"><?php echo $this->escapeHtml($this->getMethod()->getTitle()) ?></dt>
<?php endif; ?>
<?php
    $cards = $this->getCards();
    $showCount = count($cards) > 1;
?>
    <dd class="content">
        <dl class="items-cards">
        <?php foreach ($cards as $key => $card): ?>
            <?php if ($showCount): ?>
                <dt class="title"><?php echo __('Credit Card %1', $key + 1); ?></dt>
            <?php endif; ?>
            <dd class="content">
                <table class="data table">
                    <caption class="table-caption"><?php echo __('Credit Card %1', $key + 1); ?></caption>
                    <?php foreach ($card as $_label => $_value): ?>
                        <tr>
                            <th scope="row"><?php echo $this->escapeHtml($_label) ?></th>
                            <td><?php echo nl2br(implode($this->getValueAsArray($_value, true), "\n")) ?></td>
                        </tr>
                    <?php endforeach; ?>
                </table>
            </dd>
        <?php endforeach; ?>
        </dl>
    </dd>
</dl>
