<?php
/**
 * {license_notice}
 *
 * @category    design
 * @copyright   {copyright}
 * @license     {license_link}
 */
?>

<?php /* @var $this \Magento\View\Element\Template */ ?>
<div <?php echo $this->getGridHtmlClass() ? ' class="' . $this->getGridHtmlClass() . '"' : '' ?><?php echo $this->getGridHtmlCss() ? ' style="' . $this->getGridHtmlCss() . '"' : '' ?>>

    <?php if ($caption = $this->getGridCaption()): ?>
        <div class="title"><strong><?php echo $this->escapeHtml($caption) ?></strong></div>
    <?php endif; ?>

    <?php $gridElements = $this->getGridElements(); ?>
    <?php if ($gridElements): ?>
        <div class="toolbar"><?php echo $this->getChildHtml('pager'); ?></div>
        <table id="<?php echo $this->getGridHtmlId() ?>" class="data table">
            <thead>
            <tr>
                <?php foreach ($this->getGridColumns() as $column):
                    $nobr = $this->getObjectData($column, 'is_nobr') ? '<span class="nobr">%s</span>' : '%s';
                    $title = $this->getObjectData($column, 'title');
                    ?>
                    <th class="col title"><?php echo $title ? sprintf($nobr, $this->escapeHtml($title)) : '&nbsp;' ?></th>
                <?php endforeach; ?>
            </tr>
            </thead>
            <tbody>
            <?php foreach ($gridElements as $row): ?>
                <tr>
                    <?php foreach ($this->getGridColumns() as $column):
                        $nobr = $this->getObjectData($column, 'is_nobr') ? '<span class="nobr">%s</span>' : '%s';
                        $index = $this->getObjectData($column, 'index');
                        $value = $this->getObjectData($row, $index);
                        $linkUrl = $this->getObjectData($row, "{$index}_link_url");
                        $linkAnchorText = $this->getObjectData($row, "{$index}_link_text");
                        $linkText = $linkUrl ? ($linkAnchorText ? $linkAnchorText : $value) : '';
                        $linkFormat = $linkUrl ? '<a href="%s">%s</a>' : '';
                        ?>
                        <td<?php $this->getObjectData($row, 'is_amount') ? ' class="col qty"' : '' ?>>
                            <?php
                            if ($linkFormat) {
                                echo sprintf($nobr, sprintf($linkFormat, $this->escapeHtml($linkUrl), $this->escapeHtml($linkText)));
                            } else {
                                echo sprintf($nobr, $this->escapeHtml($value));
                            }
                            ?>
                        </td>
                    <?php endforeach; ?>
                </tr>
            <?php endforeach; ?>
            </tbody>
        </table>
        <div class="toolbar"><?php echo $this->getChildHtml('pager'); ?></div>
    <?php else: ?>
        <p><?php echo $this->escapeHtml($this->getEmptyGridMessage()); ?></p>
    <?php endif; ?>
</div>
