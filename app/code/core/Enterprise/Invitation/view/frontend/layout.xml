<?xml version="1.0"?>
<!--
/**
 * {license_notice}
 *
 * @category    design
 * @package     enterprise_default
 * @copyright   {copyright}
 * @license     {license_link}
 */

-->
<layout version="0.1.0">
    <default>
        <block type="Enterprise_Invitation_Block_Link" name="invitation_link_top">
            <action method="addAccountLink" />
        </block>
    </default>

    <enterprise_invitation_index_send translate="label" type="page" parent="enterprise_invitation_index_index">
        <label>Customer My Account Invitations Form</label>
        <update handle="customer_account"/>
        <reference name="customer_account_navigation">
            <action method="setActive"><path>enterprise_invitation/index/index</path></action>
        </reference>
        <reference name="my.account.wrapper">
            <block type="Enterprise_Invitation_Block_Form" name="invitationForm" template="Enterprise_Invitation::form.phtml">
                <container name="invitations.form.form.before" as="form_before" label="Invitation Form Before" htmlTag="div" htmlClass="rewards"/>
            </block>
        </reference>
    </enterprise_invitation_index_send>

    <enterprise_invitation_index_index translate="label" type="page" parent="customer_account_index">
        <label>Customer My Account Invitations List</label>
        <update handle="customer_account"/>
        <reference name="my.account.wrapper">
            <block type="Enterprise_Invitation_Block_Customer_List" name="invitations_list" template="list.phtml">
                <container name="invitations.list.list.before" as="list_before" label="Invitation List Before" htmlTag="div" htmlClass="rewards"/>
            </block>
        </reference>
    </enterprise_invitation_index_index>

    <customer_account>
        <block type="Enterprise_Invitation_Block_Link" name="invitation_link_dashboard">
            <action method="addDashboardLink" translate="label" module="Enterprise_Invitation"><block>customer_account_navigation</block><name>invitations</name><path>enterprise_invitation/</path><label>My Invitations</label></action>
        </block>
    </customer_account>

    <enterprise_invitation_customer_account_create translate="label" type="page" parent="enterprise_invitation_index_send">
        <label>Customer Account Registration by Invitation Form</label>
        <update handle="customer_account_create" />
        <reference name="content">
            <remove name="customer_form_register" />
            <block type="Enterprise_Invitation_Block_Customer_Form_Register" name="customer_form_register_invitation" template="Mage_Customer::form/register.phtml">
                <action method="append"><element>customer.form.register.fields.before</element><alias>form_fields_before</alias></action>
                <action method="append"><element>customer_form_user_attributes</element></action>
                <action method="append"><element>customer_form_address_user_attributes</element></action>
            </block>
        </reference>
    </enterprise_invitation_customer_account_create>
</layout>
