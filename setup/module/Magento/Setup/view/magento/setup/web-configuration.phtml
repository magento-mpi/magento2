<?php
$hints = [
    'address_web' => sprintf(
        '<div><p>%s</p><p>%s</p><p><a href=\'#\'>%s</a></p></div>',
        $this->translate('Enter the base URL that brings shoppers to your store (Ex. http://example.com/).'),
        $this->translate('We recommend not using your actual IP address when your store goes live, otherwise all your shoppers will see it.'),
        $this->translate('Detect IP Address')
    ),
    'encrypt_key' => sprintf(
        '<p>%s</p>',
        $this->translate('Key to encrypt sensitive data such as passwords and personally identifiable customer informaton in the Magento database. The encryption key is stored in [your Magento install dir]/app/etc/local.xml/')
    ),
];
?>

<div class="step-controls">
    <a href="#" class="btn btn-primary" ng-click="previousState()"><?php echo $this->translate('Previous'); ?></a>
    <a href="#" class="btn btn-primary" ng-click="nextState()"><?php echo $this->translate('Next'); ?></a>
</div>

<div class="page-header">
    <h1>{{$state.current.header}}</h1>
</div>

<form class="form-horizontal" role="form">
    <div class="form-group">
        <label class="col-md-3 control-label"><?php echo $this->translate('Your Store Address'); ?><span class="required">*</span></label>
        <div class="col-md-4" style="padding-left:0px; padding-right:0px;">
            <input type="text"
                   ng-model="address.web"
                   class="form-control"
                   tooltip-placement="right"
                   tooltip-html-unsafe="<?php echo $hints['address_web']; ?>"
                   tooltip-trigger="focus"
                   tooltip-append-to-body="true"
                   required />
        </div>
    </div>

    <div class="form-group">
        <label class="col-md-3 control-label"><?php echo $this->translate('Magento Admin Address'); ?><span class="required">*</span></label>
        <div class="col-md-4 input-group">
            <span class="input-group-addon">{{address.web}}</span>
            <input type="text"
                   class="form-control"
                   ng-model="address.admin"
                   required />
        </div>
    </div>

    <div class="collapsed-options">
        <a href="#" class="collapsed-options" ng-click="updateOnExpand(advanced)"><?php echo $this->translate('Advanced Options'); ?></a>
        <span class="caret"></span>
    </div>

    <div ng-show="advanced.expanded">
        <div class="form-group">
            <label class="col-md-3 control-label"><?php echo $this->translate('HTTPS Options'); ?></label>
            <div class="col-md-5">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" ng-model="https.front">&nbsp;<?php echo $this->translate('Use HTTPS for Magento Storefront'); ?>
                    </label>
                </div>
                <div class="checkbox">
                    <label>
                        <input type="checkbox" ng-model="https.admin">&nbsp;<?php echo $this->translate('Use HTTPS for Magento Admin'); ?>
                    </label>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-3 control-label"><?php echo $this->translate('Apache Rewrites'); ?></label>
            <div class="col-md-5">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" ng-model="rewrites.allowed">&nbsp;<?php echo $this->translate('Use Web Server Apache Rewrites'); ?>
                    </label>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-3 control-label"><?php echo $this->translate('Encryption Key'); ?><span class="required">*</span></label>
            <div class="col-md-5">
                <div class="radio">
                    <label>
                        <input type="radio" ng-model="encrypt.type" value="magento">&nbsp;<?php echo $this->translate('I want to use a Magento generated key'); ?>
                    </label>
                </div>
                <div class="radio">
                    <label>
                        <input type="radio" ng-model="encrypt.type" value="user">&nbsp;<?php echo $this->translate('I want to use my own encryption key'); ?>
                    </label>
                </div>
            </div>
        </div>

        <div class="form-group" ng-show="showEncryptKey()">
            <div class="col-md-4 col-md-offset-3">
                <input type="text"
                       class="form-control"
                       ng-model="encrypt.key"
                       tooltip-placement="right"
                       tooltip-html-unsafe="<?php echo $hints['encrypt_key']; ?>"
                       tooltip-trigger="focus"
                       tooltip-append-to-body="true"
                       required />
            </div>
        </div>
    </div>
</form>

<div class="step-controls">
    <a href="#" class="btn btn-primary" ng-click="previousState()"><?php echo $this->translate('Previous'); ?></a>
    <a href="#" class="btn btn-primary" ng-click="nextState()"><?php echo $this->translate('Next'); ?></a>
</div>
