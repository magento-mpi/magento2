#
# {license_notice}
#
# @category    Magento
# @package     Mage_Customer
# @subpackage  functional_tests
# @copyright   {copyright}
# @license     {license_link}
#
---
#Manage Customers and related pages
# 'Manage Customers' page
manage_customers:
    mca: customer/
    click_xpath: //ul[@id='nav']//a[contains(@href, 'customer/')]
    title: Customers / Customers / Magento Admin
    uimap:
        form: &searchCustomerGrid
            fieldsets:
                -
                    customers_grid:
                        xpath: //div[@id='customerGrid']
                        buttons:
                            reset_filter: //button[span='Reset Filter']
                            search: //button[span='Search']
                            submit: //button[span='Submit']
                        dropdowns:
                            mass_action_select_action: //select[@id='customerGrid_massaction-select']
                            massaction: //select[@name='massaction']
                            group: //select[@name='group']
                            country: //select[@name='billing_country_id']
                            website: //select[@name='website_id']
                        fields:
                            id_from: //input[@name='entity_id_from']
                            id_to: //input[@name='entity_id_to']
                            name: //input[@name='name']
                            email: //input[@name='email']
                            telephone: //input[@name='Telephone']
                            zip_code: //input[@name='billing_postcode']
                            state: //input[@name='billing_region']
                        links:
                            mass_action_select_all: //a[text()='Select All']
                            open_customer_by_value: ~
                        pageelements:
                            customer_grid_head: //table[@id='customerGrid_table']/thead/tr[@class='headings']
        buttons:
            add_new_customer: //button[span='Add New Customer' or span='Add New']
        messages: &customerMessages
            success_deleted_customer_massaction: //li[normalize-space(@class)='success-msg' and contains(.,'A total of %qtyDeletedCustomers% record(s) were deleted.')]
            success_subscribe_unsubscribe_customer_massaction: //li[normalize-space(@class)='success-msg' and contains(.,'A total of %qtySubscribeCustomers% record(s) were updated.')]
            wrong_data_of_birth: //li[normalize-space(@class)='error-msg' and contains(.,'"Date Of Birth" does not fit the entered date format.')]
            customer_email_exist: //li[normalize-space(@class)='error-msg' and contains(.,'Customer with the same email already exists in associated website.')]
            success_deleted_customer: //li[normalize-space(@class)='success-msg' and contains(.,'You deleted the customer.')]
            success_saved_customer: //li[normalize-space(@class)='success-msg' and contains(.,'You saved the customer.')]
            customer_invalid_email: //li[normalize-space(@class)='error-msg' and contains(.,'"Email" is not a valid')]
            password_too_short: //label[(@for)='_accountpassword' and contains(., 'Please enter 6 or more characters. Leading or trailing spaces will be ignored.')]
            invalid_email: //label[(@for)='_accountemail' and contains(., 'Please enter a valid email address. For example johndoe@domain.com.')]
            confirmation_for_delete: Are you sure you want to do this?
            confirmation_for_delete_address: Are you sure you want to delete this address?
            confirmation_for_massaction_delete: Are you sure?

# 'New Customer' Page
create_customer:
    mca: customer/index/new/
    title: New Customer / Customers / Customers / Magento Admin
    uimap:
        form: &newCustomerForm
            tabs:
                -
                    account_information:
                        xpath: //a[@id='customer_info_tabs_account']
                        fieldsets:
                            -
                                account_info:
                                    xpath: //fieldset[@id='_accountbase_fieldset']
                                    checkboxes:
                                        send_welcome_email: //input[@id='_accountsendemail']
                                        disable_automatic_group_change: //input[@id='disable_auto_group_change']
                                    dropdowns:
                                        associate_to_website: //*[@id='_accountwebsite_id'][not(@type='hidden')]
                                        group: //select[@id='_accountgroup_id']
                                        gender: //select[@id='_accountgender']
                                        send_from: //*[@id='_accountsendemail_store_id'][not(@type='hidden')]
                                    fields:
                                        prefix: //input[@id='_accountprefix']
                                        first_name: //input[@id='_accountfirstname']
                                        middle_name: //input[@id='_accountmiddlename']
                                        last_name: //input[@id='_accountlastname']
                                        suffix: //input[@id='_accountsuffix']
                                        email: //input[@id='_accountemail']
                                        date_of_birth: //input[@id='_accountdob']
                                        tax_vat_number: //input[@id='_accounttaxvat']
                                        custom_attribute: //input[@id='_account%attribute_name%']
                                    required: [associate_to_website, group, first_name, last_name, email]
                -
                    addresses:
                        xpath: //a[@id='customer_info_tabs_addresses']
                        fieldsets:
                            -
                                list_customer_addresses:
                                    xpath: //ul[@id='address_list']
                                    buttons:
                                        add_new_address: //button[@id='add_address_button']
                                        delete_address: //li[@id='new_item%address_number%']//a[normalize-space(@class)='btn-remove-address']/img
                                        edit_address: //li[@id='new_item%address_number%']//a[normalize-space(@class)='select_button btn-edit-address']/img
                                    radiobuttons:
                                        default_billing_address: //input[@id='address_item_billing_item%address_number%']
                                        default_shipping_address: //input[@id='address_item_shipping_item%address_number%']
                                    pageelements:
                                        list_customer_address: //li[not(contains(@class,'address-list-actions last'))]
                                        list_customer_address_index: //li[%index%]
                            -
                                edit_address:
                                    xpath: //fieldset[@id='_item%address_number%address_fieldset']
                                    dropdowns:
                                        country: //select[@id='_item%address_number%country_id']
                                        state: //select[@id='_item%address_number%region_id']
                                    fields:
                                        prefix: //input[@id='_item%address_number%prefix']
                                        first_name: //input[@id='_item%address_number%firstname']
                                        middle_name: //input[@id='_item%address_number%middlename']
                                        last_name: //input[@id='_item%address_number%lastname']
                                        suffix: //input[@id='_item%address_number%suffix']
                                        company: //input[@id='_item%address_number%company']
                                        street_address_line_1: //input[@id='_item%address_number%street0']
                                        street_address_line_2: //input[@id='_item%address_number%street1']
                                        city: //input[@id='_item%address_number%city']
                                        region: //input[@id='_item%address_number%region' and not(@type='hidden')]
                                        zip_code: //input[@id='_item%address_number%postcode']
                                        telephone: //input[@id='_item%address_number%telephone']
                                        fax: //input[@id='_item%address_number%fax']
                                        vat_number: //input[@id='_item%address_number%vat_id']
                                    required: [first_name, last_name, street_address_line_1, city, country, state, zip_code, telephone]
        buttons:
            back: //button[span='Back']
            reset: //button[span='Reset']
            save_customer: //button[@data-ui-id='customer-edit-save-button']
            save_and_continue_edit: //button[@data-ui-id='customer-edit-save-and-continue-button']
        messages: *customerMessages

# 'Edit Customer' Page
edit_customer:
    mca: customer/index/edit/id/%id%/
    title: %elementTitle% / Customers / Customers / Magento Admin
    uimap: &edit_customer-uimap
        form: &editCustomerForm
            tabs:
                -
                    customer_view:
                        xpath: //a[@id='customer_info_tabs_customer_edit_tab_view']
                        fieldsets:
                            -
                                sales_statistics:
                                    xpath: //div[div/span='Sales Statistics']
                                    pageelements:
                                        sales_statistics_head: //table/thead
                            -
                                content_customer_view:
                                    xpath: //*[@id='tab_content_customerViewAccordion']
                                    links:
                                        view_recent_orders: //*[@id='dt-lastOrders']/a
                                        view_shopping_cart: //*[@id='dt-shopingCart%websiteId%']/a
                                        view_wishlist: //*[@id='dt-wishlist']/a
                                    pageelements:
                                        products_in_shoping_cart_grid: //*[@id='dd-shopingCart%websiteId%']//tbody[//*[contains(text(),'%productName%')]]
                -
                    account_information:
                        xpath: //a[@id='customer_info_tabs_account']
                        fieldsets:
                            -
                                account_info:
                                    xpath: //fieldset[@id='_accountbase_fieldset']
                                    dropdowns:
                                        associate_to_website: //select[@id='_accountwebsite_id']
                                        group: //select[@id='_accountgroup_id']
                                        gender: //select[@id='_accountgender']
                                    fields:
                                        created_from: //input[@id='_accountcreated_in']
                                        prefix: //input[@id='_accountprefix']
                                        first_name: //input[@id='_accountfirstname']
                                        middle_name: //input[@id='_accountmiddlename']
                                        last_name: //input[@id='_accountlastname']
                                        suffix: //input[@id='_accountsuffix']
                                        email: //input[@id='_accountemail']
                                        date_of_birth: //input[@id='_accountdob']
                                        tax_vat_number: //input[@id='_accounttaxvat']
                                    required: [group, first_name, last_name, email]
                -
                    addresses:
                        xpath: //a[@id='customer_info_tabs_addresses']
                        fieldsets:
                            -
                                list_customer_addresses:
                                    xpath: //ul[@id='address_list']
                                    buttons:
                                        add_new_address: //button[@id='add_address_button']
                                        delete_address: //li[@id='new_item%address_number%' or @id='address_item_%address_number%']//a[normalize-space(@class)='btn-remove-address']/img
                                        edit_address: //li[@id='new_item%address_number%' or @id='address_item_%address_number%']//a[normalize-space(@class)='select_button btn-edit-address']/img
                                    radiobuttons:
                                        default_billing_address: //input[@id='address_item_billing%address_number%' or @id='address_item_billing_item%address_number%']
                                        default_shipping_address: //input[@id='address_item_shipping%address_number%' or @id='address_item_shipping_item%address_number%']
                                    pageelements:
                                        list_customer_address: //li[not(contains(@class,'address-list-actions last'))]
                                        list_customer_address_index: //li[%index%]
                                        list_customer_address_address: //li[%index%]/address
                            -
                                edit_address:
                                    xpath: //fieldset[@id='_item%address_number%address_fieldset']
                                    dropdowns:
                                        country: //select[@id='_item%address_number%country_id']
                                        state: //select[@id='_item%address_number%region_id']
                                    fields:
                                        prefix: //input[@id='_item%address_number%prefix']
                                        first_name: //input[@id='_item%address_number%firstname']
                                        middle_name: //input[@id='_item%address_number%middlename']
                                        last_name: //input[@id='_item%address_number%lastname']
                                        suffix: //input[@id='_item%address_number%suffix']
                                        company: //input[@id='_item%address_number%company']
                                        street_address_line_1: //input[@id='_item%address_number%street0']
                                        street_address_line_2: //input[@id='_item%address_number%street1']
                                        city: //input[@id='_item%address_number%city']
                                        region: //input[@id='_item%address_number%region' and not(@type='hidden')]
                                        zip_code: //input[@id='_item%address_number%postcode']
                                        telephone: //input[@id='_item%address_number%telephone']
                                        fax: //input[@id='_item%address_number%fax']
                                        vat_number: //input[@id='_item%address_number%vat_id']
                                    required: [first_name, last_name, street_address_line_1, city, country, zip_code, telephone]
                -
                    orders:
                        xpath: //a[@id='customer_info_tabs_orders']
                        fieldsets:
                            -
                                product_review_grid:
                                    xpath: //div[@id='customer_orders_grid']
                                    buttons:
                                        reset_filter: //button[span='Reset Filter']
                                        search: //button[span='Search']
                                    dropdowns:
                                        filter_bought_from: //select[@name='store_id']
                -
                    billing_agremnts:
                        xpath: //a[@id='customer_info_tabs_customer_edit_tab_agreements']
                        # need to edit
                -
                    recuring_profiles:
                        xpath: //a[@id='customer_info_tabs_customer_edit_tab_recurring_payment']
                        fieldsets:
                            -
                                product_review_grid:
                                    xpath: //div[@id='customer_edit_tab_recurring_payment']
                                    buttons:
                                        reset_filter: //button[span='Reset Filter']
                                        search: //button[span='Search']
                                    dropdowns:
                                        filter_store: //select[@name='store_id']
                -
                    shopping_cart:
                        xpath: //a[@id='customer_info_tabs_cart']
                        # need to edit
                -
                    wishlist:
                        xpath: //a[@id='customer_info_tabs_wishlist']
                        fieldsets:
                            -
                                wishlist_grid:
                                    xpath: //div[@id='wishlistGrid']
                                    buttons:
                                        reset_filter: //button[span='Reset Filter']
                                        search: //button[span='Search']
                                    fields:
                                        filter_product_name: //input[@id='wishlistGrid_filter_product_name']
                                        filter_description: //input[@id='wishlistGrid_filter_description']
                                        filter_qty_from: //input[@id='wishlistGrid_filter_qty_from']
                                        filter_qty_to: //input[@id='wishlistGrid_filter_qty_to']
                                        filter_date_from: //input[@name='added_at[from]']
                                        filter_date_to: //input[@name='added_at[to]']
                                        filter_days_from: //input[@id='wishlistGrid_filter_days_from']
                                        filter_days_to: //input[@id='wishlistGrid_filter_days_to']
                                    dropdowns:
                                        filter_added_from: //select[@name='store']
                -
                    newsletters:
                        xpath: //a[@id='customer_info_tabs_newsletter']
                        # need to edit
                -
                    product_review:
                        xpath: //a[@id='customer_info_tabs_reviews']
                        fieldsets:
                            -
                                product_review_grid:
                                    xpath: //div[@id='reviwGrid']
                                    buttons:
                                        reset_filter: //button[span='Reset Filter']
                                        search: //button[span='Search']
                                    dropdowns:
                                        filter_visible_in: //select[@name='visible_in']
        buttons:
            back: //button[span='Back']
            reset: //button[span='Reset']
            create_order: //button[span='Create Order']
            delete_customer: //button[@id='delete']
            save_customer: //button[@data-ui-id='customer-edit-save-button']
            save_and_continue_edit: //button[@data-ui-id='customer-edit-save-and-continue-button']
        pageelements:
            customer_header: //div[@class="page-title-inner"]/h1
        messages: *customerMessages

edit_customer_save_and_continue:
    mca: customer/index/edit/id/%id%/back/edit/active_tab/%tab%/
    title: %elementTitle% / Customers / Customers / Magento Admin
    uimap: *edit_customer-uimap

new_customer_with_error_account:
    mca: customer/index/new/active_tab/account/
    title: New Customer / Customers / Customers / Magento Admin
    uimap: *edit_customer-uimap

new_customer_with_error_addresses:
    mca: customer/index/new/active_tab/addresses/
    title: New Customer / Customers / Customers / Magento Admin
    uimap: *edit_customer-uimap

# 'Online Customers' Page
online_customers:
    mca: customer/online/
    click_xpath: //ul[@id='nav']//a[contains(@href, '/customer/online/')]
    title: Customers Now Online / Customers / Magento Admin
    uimap:
        form:
            fieldsets:
                -
                    online_customer_grid:
                        xpath: //div[@id='onlineGrid']
                        buttons:
                            reset_filter: //button[span='Reset Filter']
                            search: //button[span='Search']
                        dropdowns:
                            type: //select[@id='onlineGrid_filter_type']
                        fields:
                            id_from: //input[@id='onlineGrid_filter_customer_id_from']
                            id_to: //input[@id='onlineGrid_filter_customer_id_to']
                            firstname: //input[@name='firstname']
                            lastname: //input[@name='lastname']
                            email: //input[@name='email']
                            session_start_time_from: //input[@name='session_start_time[from]']
                            session_start_time_to: //input[@name='session_start_time[to]']
                            last_activity_from: //input[@name='last_activity[from]']
                            last_activity_to: //input[@name='last_activity[to]']
                            last_url: //input[@name='last_url']
                        pageelements:
                            online_grid_head: //table[@id='onlineGrid_table']/thead/tr[@class='headings']
