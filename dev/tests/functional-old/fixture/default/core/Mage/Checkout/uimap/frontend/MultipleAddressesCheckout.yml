#
# {license_notice}
#
# @category    Magento
# @package     Mage_Checkout
# @subpackage  functional_tests
# @copyright   {copyright}
# @license     {license_link}
#
---
# 'Checkout with Multiple Addresses' page
checkout_multishipping_login:
    mca: multishipping/checkout/login/
    title: Customer Login
    uimap: &checkout_multishipping_login_uimap
        form:
            fieldsets:
                -
                    new_account:
                        xpath: //div[contains(@class,'block new customer')]
                        buttons:
                            create_account: //a[span='Register']
                -
                    log_in_customer:
                        xpath: //div[contains(@class,'block customer login')]
                        buttons:
                            login: //button[span='Login']
                        links:
                            forgot_password: //a[span='Forgot Your Password?']
                        fields:
                            email: //input[@id='email']
                            password: //input[@id='pass']
        messages: &checkoutMessages
            please_select_option: "//*[@id='advice-validate-select-%fieldId%'][not(contains(@style,'display: none;'))]"
            different_passwords: "//*[@id='advice-validate-cpassword-%fieldId%'][not(contains(@style,'display: none;'))]"
            invalid_password_length: "//*[@id='advice-validate-password-%fieldId%'][not(contains(@style,'display: none;'))]"
            invalid_email_address: "//*[@id='advice-validate-email-%fieldId%'][not(contains(@style,'display: none;'))]"
            long_value_alert: '"%fieldName%" length must be equal or less than 255 characters.'
            invalid_credit_card_number: "//div[@id='advice-validate-cc-type-ccsave_cc_number' and not(contains(@style,'display: none;'))]"
            invalid_credit_card_type: "//div[@id='advice-validate-cc-type-select-ccsave_cc_type' and not(contains(@style,'display: none;'))]"
            incorrect_credit_card_exp_date: "//div[@id='advice-validate-cc-exp-ccsave_expiration' and not(contains(@style,'display: none;'))]"
            invalid_login_or_password: //li[normalize-space(@class)='error-msg' and contains(.,'Invalid login or password.')]
            empty_shipping_methods_for_all_addresses: //li[normalize-space(@class)='error-msg' and contains(.,'Please select shipping methods for all addresses')]
            success_saved_address: //li[normalize-space(@class)='success-msg' and contains(.,'The address has been saved.')]
            payment_method_not_defined: //li[normalize-space(@class)='error-msg' and contains(.,'Payment method is not defined')]
            no_shipping: //div[div/strong='%addressHeader%']//p[text()='Sorry, no quotes are available for this order.']
            ship_method_unavailable: "//div[div/strong='%addressHeader%']//dt[text()='%shipService%']/following::dd[1]//li[normalize-space(text())='%shipService%: This shipping method is not available. To use this shipping method, please contact us.']"
            paypal_alert: There was an error processing your order. Please contact us or try again later.
            shipping_alert: Please specify shipping method.
            payment_alert: Please specify payment method.
            success_checkout: //h2[contains(.,'Thank you for your purchase!')]
            success_registered_user: //li[normalize-space(@class)='success-msg' and contains(.,'Thank you for registering with')]
            not_valid_length: //li[normalize-space(@class)='error-msg' and contains(.,'"%fieldName%" length must be equal or less than 255 characters.')]
            not_valid_length_email: //li[normalize-space(@class)='error-msg' and contains(.,'"Email" exceeds the allowed length.')]
            invalid_mail: //div[@id='advice-validate-email-email_address']
            passwords_not_match: //div[@id='advice-validate-cpassword-confirmation']
            short_passwords: //div[@id='advice-validate-password-password']
            email_exists: //li[span='There is already an account with this email address. If you are sure that it is your email address, click here to get your password and access your account.']
            shopping_cart_is_empty: //div[p='You have no items in your shopping cart.']
            message_with_order_ids: //*[contains(text(),'Your order')]
            zero_payment: //dt[contains(label,'No Payment Information Required')]

checkout_multishipping_login_with_params:
    mca: multishipping/checkout/login/?no_cache=
    title: Customer Login
    uimap: *checkout_multishipping_login_uimap

checkout_multishipping_register:
    mca: multishipping/checkout/register/
    title: Create New Customer Account
    uimap:
        form: &newCustomerForm
            fieldsets:
                -
                    account_info:
                        xpath: //form[@id='form-validate']
                        buttons:
                            submit: //button[span='Submit']
                        checkboxes:
                            sign_up_newsletter: //input[@id='is_subscribed']
                        dropdowns:
                            state: //select[@id='region_id']
                            country: //select[@id='country']
                        links:
                            back: //p[@class='back-link']/a
                        fields:
                            first_name: //input[@id='firstname']
                            last_name: //input[@id='lastname']
                            email: //input[@id='email_address']
                            company: //input[@id='company']
                            telephone: //input[@id='telephone']
                            street_address_1: //input[@id='street_1']
                            street_address_2: //input[@id='street_2']
                            city: //input[@id='city']
                            zip_code: //input[@id='zip']
                            region: //input[@id='region']
                            password: //input[@id='password']
                            password_confirmation: //input[@id='confirmation']
        messages: *checkoutMessages

checkout_multishipping_addresses:
    mca: multishipping/checkout/addresses/
    title: Ship to Multiple Addresses - Magento Commerce
    uimap: &checkoutMultishipping
        form:
            fieldsets:
                -
                    checkout_progress: &checkoutProgress
                        xpath: //*[@id='checkout-progress-state']
                        pageelements:
                            address_box: //div[./h2[text()='Shipping Information'] and //div[./address%addressParams%]]/h3
                            select_addresses: //li[@title='Select Addresses']
                            shipping_information: //li[@title='Shipping Information']
                            billing_information: //li[@title='Billing Information']
                            place_order: //li[@title='Place Order']
                            order_success: //li[@title='Order Success']
                -
                    checkout_multishipping_form:
                        xpath: //form[@id='checkout_multishipping_form']
                        buttons:
                            add_new_address: //button[span='Enter a New Address']
                            update_qty_and_addresses: //button[span='Update Qty & Addresses']
                            continue_to_shipping_information: //button[span='Continue to Shipping Information']
                        links:
                            product: //a[text()='%productName%']
                            back_to_shopping_cart: //a[span='Back to Shopping Cart']
                            remove_product: //tr[.//a='%productName%']//a[span='Remove item']
                        dropdowns:
                            address_choice: //tr[.//a='%productName%'][%productIndex%]//select
                            is_any_address_choice: //tr[.//a='%productName%']//select
                        fields:
                            product_qty: "//tr[.//a='%productName%']//input[contains(@name,'[qty]')]"
        messages: *checkoutMessages

checkout_multishipping_addresses_post:
    mca: multishipping/checkout/addressesPost/
    title: Ship to Multiple Addresses - Magento Commerce
    uimap: *checkoutMultishipping

checkout_multishipping_new_shipping:
    mca: multishipping/checkout_address/newShipping/
    title: Create Shipping Address - Magento Commerce
    uimap:
        form: &createNewAddress
            fieldsets:
                -
                    create_shipping_address:
                        xpath: //form[@id='form-validate']
                        buttons:
                            save_address: //button[span='Save Address']
                        fields:
                            first_name: //input[@id='firstname']
                            last_name: //input[@id='lastname']
                            company: //input[@id='company']
                            telephone: //input[@id='telephone']
                            fax: //input[@id='fax']
                            street_address_1: //input[@id='street_1']
                            street_address_2: //input[@id='street_2']
                            city: //input[@id='city']
                            region: //input[@id='region']
                            zip_code: //input[@id='zip']
                        dropdowns:
                            state: //select[@id='region_id']
                            country: //select[@id='country']
                        checkboxes:
                            set_default_billing_address: //input[@id='primary_billing']
                            set_default_shipping_address: //input[@id='primary_shipping']
                        links:
                            back: //p[@class='back-link']/a[@href]
        messages: *checkoutMessages

checkout_multishipping_shipping_methods:
    mca: multishipping/checkout/shipping/
    title: Shipping Methods - Magento Commerce
    uimap:
        form: &createNewShipping
            fieldsets:
                -
                    checkout_progress: *checkoutProgress
                -
                    general_shipping_methods_form:
                        xpath: //form[@id='shipping_method_form']
                        pageelements:
                            shipping_method_address: //div[@class='block shipping']
                            shipping_items: //div[@class='block shipping' or @class='block other']
                        buttons:
                            continue_to_billing_information: //button[span='Continue to Billing Information']
                        links:
                            back_to_select_addresses: //a[text()='Back to Select Addresses']
                -
                    shipping_method:
                        xpath: //div[div/strong='%addressHeader%']
                        links:
                            change_shipping_address: //a[contains(@href,'editShipping/id/')]
                            edit_items: //a[span='Edit Items']
                            product: //a[text()='%productName%']
                            add_order_gift_message: //dd[contains(@id,'allow-gift-options-for-order-container')]//a[text()='Gift Message']
                            add_item_gift_message: //li[div/strong='%productName%']//a[text()='Gift Message']
                        checkboxes:
                            add_gift_options: //div[label/span='Add gift options']/input
                            gift_option_for_order: //div[label/span='Add gift options for the Entire Order']/input
                            gift_option_for_item: //div[label/span='Add gift options for Individual Items']/input
                        radiobuttons:
                            ship_method: //dl[dt='%shipService%']//div[contains(label,'%shipMethod%')]//input[not(@checked)]
                            one_method_selected: //dl[dt='%shipService%']//div[contains(label,'%shipMethod%')]//input[@checked]
                        fields:
                            ship_service_name: //dt[text()='%shipService%']
                            order_gift_message_from: //div[contains(@id,'gift-messages-for-order-container')]//input[@title='From']
                            order_gift_message_to: //div[contains(@id,'gift-messages-for-order-container')]//input[@title='To']
                            order_gift_message: //div[contains(@id,'gift-messages-for-order-container')]//textarea[@title='Message']
                            item_gift_message_from: //li[div/strong='%productName%']//input[@title='From']
                            item_gift_message_to: //li[div/strong='%productName%']//input[@title='To']
                            item_gift_message: //li[div/strong='%productName%']//textarea[@title='Message']
        messages: *checkoutMessages

checkout_multishipping_edit_shipment_address:
    mca: multishipping/checkout_address/editShipping/id/%id%/
    title: Edit Shipping Address - Magento Commerce
    uimap:
        form:
            fieldsets:
                -
                    edit_shipping_address:
                        xpath: //div[div/h1[contains(text(),'Edit Shipping Address')]]
                        buttons:
                            save_address: //button[span='Save Address']
                        fields:
                            first_name: //input[@id='firstname']
                            last_name: //input[@id='lastname']
                            company: //input[@id='company']
                            telephone: //input[@id='telephone']
                            fax: //input[@id='fax']
                            street_address_1: //input[@id='street_1']
                            street_address_2: //input[@id='street_2']
                            city: //input[@id='city']
                            zip_code: //input[@id='zip']
                            region: //input[@id='region']
                        dropdowns:
                            state: //select[@id='region_id']
                            country: //select[@id='country']
                        checkboxes:
                            set_default_billing_address: //input[@id='primary_billing']
                            set_default_shipping_address: //input[@id='primary_shipping']
                        links:
                            back: //p[@class='back-link']/a[@href]
        messages: *checkoutMessages

checkout_multishipping_payment_methods:
    mca: multishipping/checkout/billing/
    title: Billing Information - Magento Commerce
    uimap:
        form: &paymentForOrder
            fieldsets:
                -
                    checkout_progress: *checkoutProgress
                -
                    payment_method:
                        xpath: //form[@id='multishipping-billing-form']
                        buttons:
                            continue_to_review_order: //button[span='Continue to Review Your Order']
                        radiobuttons:
                            check_payment_method: //dt[label='%paymentTitle%']/input
                            selected_one_payment: //dt[label='%paymentTitle%']/input[@checked]
                        fields:
                            name_on_card: //input[@id='%paymentId%_cc_owner']
                            card_number: //input[@id='%paymentId%_cc_number']
                            card_verification_number: //input[@id='%paymentId%_cc_cid']
                            purchase_order_number: //input[@id='po_number']
                        dropdowns:
                            card_type: //select[@id='%paymentId%_cc_type']
                            expiration_month: //select[@id='%paymentId%_expiration']
                            expiration_year: //select[@id='%paymentId%_expiration_yr']
                        links:
                            change_billing_address: //a[contains(@href,'selectBilling/')]
                            back_to_shipping_information: //a[span='Back to Shipping Information']
                        pageelements:
                            billing_method_address: //div[@class='box address']
        messages: *checkoutMessages

checkout_multishipping_select_billing_address:
    mca: multishipping/checkout_address/selectBilling/
    title: Change Billing Address - Magento Commerce
    uimap:
        form: &selectBillingAddress
            fieldsets:
                -
                    choose_billing_address:
                        xpath: //div[@class='multicheckout block change billing']
                        buttons:
                            add_new_address: //button[span='Add New Address']
                        links:
                            back_to_billing_info: //a[span='Back to Billing Information']
                        pageelements:
                            billing_method_address: //div[@class='box billing']
                -
                    billing_address:
                        xpath: //div[@class='multicheckout block change billing']//div[@class='box billing'][%number%]
                        links:
                            edit_address: //a[span='Edit Address']
                            select_address: //a[span='Select Address']
        messages: *checkoutMessages

checkout_multishipping_create_billing_address:
    mca: multishipping/checkout_address/newBilling/
    title: Create Billing Address - Magento Commerce
    uimap:
        form:
            fieldsets:
                -
                    create_billing_address:
                        xpath: //*[@id='form-validate']
                        buttons:
                            save_address: //button[span='Save Address']
                        fields:
                            first_name: //input[@id='firstname']
                            last_name: //input[@id='lastname']
                            company: //input[@id='company']
                            telephone: //input[@id='telephone']
                            fax: //input[@id='fax']
                            street_address_1: //input[@id='street_1']
                            street_address_2: //input[@id='street_2']
                            city: //input[@id='city']
                            zip_code: //input[@id='zip']
                            region: //input[@id='region']
                        dropdowns:
                            state: //select[@id='region_id']
                            country: //select[@id='country']
                        checkboxes:
                            set_default_billing_address: //input[@id='primary_billing']
                            set_default_shipping_address: //input[@id='primary_shipping']
                        links:
                            back: //p[@class='back-link']/a[@href]
        messages: *checkoutMessages

checkout_multishipping_edit_billing_address:
    mca: multishipping/checkout_address/editAddress/id/%id%/
    title: Edit Address - Magento Commerce
    uimap:
        form: *createNewAddress
        messages: *checkoutMessages

checkout_multishipping_review_order:
    mca: multishipping/checkout/overview/
    title: Review Order - Magento Commerce
    uimap:
        form: &reviewOrder
            fieldsets:
                -
                    checkout_progress: *checkoutProgress
                -
                    billing_info:
                        xpath: //div[div/strong='Billing Information']
                        links:
                            billing_address_change: //div[strong/span='Billing Address']//a[span='Change']
                            payment_method_change: //div[strong/span='Payment Method']//a[span='Change']
                        pageelements:
                            billing_method_address: //div[strong/span='Billing Address']
                            payment_method: //div[strong/span='Payment Method']//dt
                            card_data: //div[strong/span='Payment Method']//table
                -
                    shipping_info:
                        xpath: //*[@class='block shipping']
                        pageelements:
                            shipping_method_address: //div[@class='content']
                -
                    shipping_info_per_order:
                        xpath: //div[div/strong='%addressHeader%']
                        links:
                            shipping_address_change: //div[strong/span='Shipping To']//a[span='Change']
                            shipping_method_change: //div[strong/span='Shipping Method']//a[span='Change']
                        pageelements:
                            shipping_method: //div[strong/span='Shipping Method']//p
                -
                    order_items:
                        xpath: //div[div/strong='%addressHeader%']//div[strong/span='Items']
                        links:
                            edit_items: //a[span='Edit Items']
                        pageelements:
                            product_table: //table/tbody
                            product_table_head: //table/thead
                            product_line: //table/tbody/tr
                            price_totals: //table/tfoot
                            price_totals_line: //table/tfoot/descendant::tr
                -
                    review_order:
                        xpath: //form[@id='review-order-form']
                        links:
                            back_to_billing_information: //a[span='Back to Billing Information']
                        buttons:
                            place_order: //button[span='Place Order']
                        pageelements:
                            shipping_method_products: //table[@class='items data']
                            grand_total: //*[@class='totals grand']//span[@class='price']
                            3d_secure_header: //h3[text()='Card Verification']
                            virtual_item_head: //div[strong='Other items in your order']
                -
                    3d_secure_card_validation: &3DSecureCardValidation
                        xpath: //div[@id='centinel-authenticate-block']
                        pageelements:
                            3d_secure_iframe: //iframe[@data-container='iframe']
                -
                    3d_secure_frame: &3DSecureCardValidation
                        xpath:
                        fields:
                            3d_password: //input[@name='external.field.password']
                        buttons:
                            3d_submit: //input[@value='Submit']
                            3d_continue: //input[@value='Continue']
                        pageelements:
                            incorrect_password: //b[text()='Incorrect, Please try again']
                            verification_successful: //h1[text()='Verification Successful']
                            verification_failed: //h4[text()='Verification Failed']
                            verification_cannot_processed: //h4[text()='Verification cannot be processed']
        messages: *checkoutMessages

checkout_multishipping_success_order:
    mca: multishipping/checkout/success/
    title: Magento Commerce
    uimap:
        form:
            fieldsets:
                -
                    checkout_progress: *checkoutProgress
                -
                    success_order:
                        xpath: //div[h2='Thank you for your purchase!']
                        links:
                            all_order_number: //a[contains(@href,'/sales/order/view/order_id/')]
                            order_number: //a[text()='%orderId%']
                        buttons:
                            continue_shopping: //a[span='Continue Shopping']
        messages: *checkoutMessages