# Magento
#
# {license_notice}
#
# @category    Magento
# @package     Mage_ImportExport
# @subpackage  functional_tests
# @copyright   {copyright}
# @license     {license_link}
#
---
# Manage Scheduled Import/Export page

scheduled_import_export:
    mca: scheduled_operation/
    click_xpath: //ul[@id='nav']//a[contains(@href, '/scheduled_operation/')]
    title: Scheduled Imports/Exports / Data Transfer / System / Magento Admin
    uimap: &scheduledImportExport
        form:
            fieldsets:
                -
                    grid_and_filter:
                        xpath: //div[@id='operationGrid']
                        buttons:
                            reset_filter: //button[span='Reset Filter']
                            search: //button[span='Search']
                            submit: //button[span='Submit']
                        links:
                            selectall: //div[@id='operationGrid_massaction']//a[contains(.,'Select All')]
                        fields:
                            name: //input[@id='operationGrid_filter_name']
                            date_from: //input[@name='last_run_date[from]']
                            date_to: //input[@name='last_run_date[to]']
                            grid: //table[@id='operationGrid_table']
                        dropdowns:
                            operation: //select[@id='operationGrid_filter_operation_type']
                            entity_type: //select[@id='operationGrid_filter_entity_type']
                            frequency: //select[@id='operationGrid_filter_freq']
                            status: //select[@id='operationGrid_filter_status']
                            last_outcome: //select[@id='operationGrid_filter_is_success']
                            action: //tr[td[2][normalize-space(text())='%attr_code%']]//select[@class = 'action-select']
                            status_visibility: //select[@id='visibility']
                            grid_massaction_select: //select[@id='operationGrid_massaction-select']
                        pageelements:
                            scheduled_grid_head: //thead/tr[@class='headings']
        buttons:
            add_scheduled_import: //button[span='Add Scheduled Import']
            add_scheduled_export: //button[span='Add Scheduled Export']
        messages: &messages
            success_saved_export: //li[normalize-space(@class)='success-msg' and contains(.,'We saved the scheduled report.')]
            success_saved_import: //li[normalize-space(@class)='success-msg' and contains(.,'We saved the scheduled import.')]
            success_delete_export: //li[normalize-space(@class)='success-msg' and contains(.,'We deleted the scheduled export.')]
            success_delete_import: //li[normalize-space(@class)='success-msg' and contains(.,'We deleted the scheduled import.')]
            success_run: //li[normalize-space(@class)='success-msg' and contains(.,'The operation ran.')]
            error_run: //li[normalize-space(@class)='error-msg' and contains(.,'Unable to run operation')]
            delete_confirmation_export: Are you sure you want to delete this scheduled export?
            delete_confirmation_import: Are you sure you want to delete this scheduled import?
            success_delete_records: //li[normalize-space(@class)='success-msg' and contains(.,'We deleted a total of %qtyDeletedRecords% record(s).')]
            delete_confirmation: Are you sure you want to delete the selected scheduled imports/exports?
            success_update_status: //li[normalize-space(@class)='success-msg' and contains(.,'A total of %qtyUpdatedRecords% record(s) have been updated.')]

scheduled_importexport_add:
    mca: scheduled_operation/new/type/%type%/
    title: New Scheduled %type% / Scheduled Imports/Exports / Data Transfer / System / Magento Admin
    uimap: &createImportExport
        form:
            fieldsets:
                -
                    settings:
                        xpath: //fieldset[@id='operation_settings']
                        fields:
                            name: //input[@id='name']
                            description: //textarea[@id='details']
                        dropdowns:
                            entity_type: //select[@id='entity']
                            behavior: //select[@name='behavior'][not(@disabled)]
                            file_format: //select[@id='file_format']
                            start_time_hours: //input[@id='start_time']/following-sibling::select[1]
                            start_time_minutes: //input[@id='start_time']/following-sibling::select[2]
                            start_time_seconds: //input[@id='start_time']/following-sibling::select[3]
                            frequency: //select[@id='freq']
                            force_import: //select[@id='force_import']
                            status: //select[@id='status']
                -
                    information:
                        xpath: //fieldset[@id='file_settings']
                        fields:
                            file_path: //input[@id='file_path']
                            file_name: //input[@id='file_name']
                            host: //input[@id='host' and not(ancestor::tr[contains(@style,'display: none')])]
                            user_name: //input[@id='user' and not(ancestor::tr[contains(@style,'display: none')])]
                            password: //input[@id='password' and not(ancestor::tr[contains(@style,'display: none')])]
                        dropdowns:
                            server_type: //select[@id='server_type']
                            file_mode: //select[@id='file_mode' and not(ancestor::tr[contains(@style,'display: none')])]
                            passive_mode: //select[@id='passive' and not(ancestor::tr[contains(@style,'display: none')])]
                -
                    email_settings:
                        xpath: //fieldset[@id='email_settings']
                        fields:
                            email_copy: //input[@id='email_copy']
                        dropdowns:
                            email_receiver: //select[@id='email_receiver']
                            email_sender: //select[@id='email_sender']
                            email_template: //select[@id='email_template']
                            email_copy_method: //select[@id='email_copy_method']
                -
                    grid_and_filter:
                        xpath: //*[@id='export_filter_container']
                        fields:
                            attribute_label: //table[@id='export_filter_grid_table']//th//input[@id='export_filter_grid_filter_frontend_label']
                            attribute_code: //table[@id='export_filter_grid_table']//th//input[@id='export_filter_grid_filter_attribute_code']
                            date_filter_from: //table[@id="export_filter_grid_table"]//tr[td[3][normalize-space(text())='%attr_code%']]//input[@id='export_filter_%attr_code%'][contains(@class, 'input-text-range-date')]
                            date_filter_to: //table[@id="export_filter_grid_table"]//tr[td[3][normalize-space(text())='%attr_code%']]//input[@id='export_filter_%attr_code%_to'][contains(@class, 'input-text-range-date')]
                            input_filter: //table[@id="export_filter_grid_table"]//tr[td[3][normalize-space(text())='%attr_code%']]//input[contains(@class, 'input-text-export-filter')]
                            text_filter_from: //table[@id="export_filter_grid_table"]//tr[td[3][normalize-space(text())='%attr_code%']]//input[contains(@class, 'input-text-range')][1]
                            text_filter_to: //table[@id="export_filter_grid_table"]//tr[td[3][normalize-space(text())='%attr_code%']]//input[contains(@class, 'input-text-range')][2]
                        buttons:
                            reset_filter: //button[@title='Reset Filter']
                            search: //button[@title='Search']
                        dropdowns:
                            select_filter: //table[@id="export_filter_grid_table"]//tr[td[3][normalize-space(text())='%attr_code%']]//select[contains(@class, 'select-export-filter')]
        buttons:
            back: //button[@id='back']
            reset: //button[@id='reset']
            save: //button[@id='save']
            delete: //button[@id='delete']
        messages: *messages

scheduled_importexport_edit:
    mca: scheduled_operation/edit/id/%id%/
    title: Scheduled %type% / Scheduled Imports/Exports / Data Transfer / System / Magento Admin
    uimap: *createImportExport

