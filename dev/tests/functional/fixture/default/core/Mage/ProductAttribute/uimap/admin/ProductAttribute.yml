#
# {license_notice}
#
# @category    Magento
# @package     Mage_ProductAttribute
# @subpackage  functional_tests
# @copyright   {copyright}
# @license     {license_link}
#
---
# Manage Attributes and related pages

# Manage Product Attributes page
manage_attributes:
    mca: catalog_product_attribute/
    click_xpath: //ul[@id='nav']//a[contains(@href, 'catalog_product_attribute')]
    title: Manage Attributes / Attributes / Stores / Magento Admin
    uimap:
        form: &searchProductAttributeGrid
            fieldsets:
                -
                    attributes_grid:
                        xpath: //div[@id='attributeGrid']
                        buttons:
                            reset_filter: //button[span='Reset Filter']
                            search: //button[span='Search']
                        fields:
                            attribute_code: //input[@name='attribute_code']
                            attribute_label: //input[@name='frontend_label']
                        dropdowns:
                            system: //select[@name='is_user_defined']
                            required: //select[@name='is_required']
                            visible: //select[@name='is_visible']
                            scope: //select[@name='is_global']
                            searchable: //select[@name='is_searchable']
                            use_in_layered_navigation: //select[@name='is_filterable']
                            comparable: //select[@name='is_comparable']
                        pageelements:
                            attributes_grid_head: //div[@id='attributeGrid']//thead/tr[@class='headings']
        buttons:
            add_new_attribute: //button[span='Add New Attribute' or span='Add New']
        messages: &productAttributeMessages
            attribute_used_in_configurable: //li[normalize-space(@class)='error-msg' and contains(.,'This attribute is used in configurable products.')]
            success_deleted_attribute: //li[normalize-space(@class)='success-msg' and contains(.,'The product attribute has been deleted.')]
            exists_attribute_code: //*[@class='mage-error' and @for='attribute_code' and text()='Attribute with the same code already exists.' and not(contains(@style,'display: none;'))]
            success_saved_attribute: //li[normalize-space(@class)='success-msg' and contains(.,'The product attribute has been saved.')]
            wrong_length_attribute_code: //*[@class='mage-error' and @for='attribute_code' and text()='Maximum length of this field must be equal or less than 30 symbols.' and not(contains(@style,'display: none;'))]
            invalid_attribute_code: //*[@class='mage-error' and @for='attribute_code' and text()='Please use only letters (a-z), numbers (0-9) or underscore(_) in this field, first character should be a letter.' and not(contains(@style,'display: none;'))]
            error_invalid_position: //*[@class='mage-error' and @for='position' and text()='Please enter a valid number in this field.' and not(contains(@style,'display: none;'))]
            delete_confirm_message: Are you sure you want to do this?

# Add New Product Attribute page
new_product_attribute:
    mca: catalog_product_attribute/new/
    title: New Attribute / Manage Attributes / Magento Admin
    uimap:
        form: &newProductAttributeForm
            tabs:
                -
                    properties:
                        xpath: //a[@id='product_attribute_tabs_main']
                        fieldsets:
                            -
                                attribute_properties: &productAttributeProperties
                                    xpath: //*[@id='base_fieldset']
                                    fields:
                                        attribute_label: //input[@id='attribute_label']
                                    dropdowns:
                                        catalog_input_type_for_store_owner: //select[@id='frontend_input']
                                        values_required: //select[@id='is_required']
                            -
                                manage_options: &productAttributeManageOptions
                                    xpath: //*[@id='manage-options-panel' and not(@style='display: none;')]
                                    buttons:
                                        add_option: //button[@id='add_new_option_button']
                                        delete_option: //td[contains(input/@name,'option[delete][option_%fieldOptionNumber%]')]/button
                                    checkboxes:
                                        is_default: //input[@name='default[]' and @value='option_%fieldOptionNumber%']
                                    fields:
                                        admin_option_name: //input[@name='option[value][option_%fieldOptionNumber%][0]']
                                        options_by_store_name: //td[contains(input/@name,'option[value][option_%fieldOptionNumber%]')][%storeViewNumber%]/input
                                        option_orders: //td[@class='col-draggable']/input
                                    pageelements:
                                        manage_options_option: //*[@data-role='options-container']/tr
                                        is_default_option_index: //tr[%index%]//input[@class='input-radio']
                                    links:
                                        move_attribute_option_row: //*[@class='draggable-handle' and ../input[@name='option[order][option_%fieldOptionNumber%]']]
                            -
                                advanced_attribute_properties: &productAttributeAdvancedProperties
                                    xpath: //*[@id='advanced_fieldset-wrapper']
                                    fields:
                                        attribute_code: //input[@id='attribute_code']
                                        default_text_field_value: //input[@id='default_value_text']
                                        default_text_area_value: //textarea[@id='default_value_textarea']
                                        default_date_value: //input[@id='default_value_date']
                                        default_price_value: //input[@id='default_value_text']
                                    dropdowns:
                                        scope: //select[@id='is_global']
                                        default_yesno_value: //select[@id='default_value_yesno']
                                        unique_value: //select[@id='is_unique']
                                        input_validation: //select[@id='frontend_class']
                                        use_to_create_configurable_product: //select[@id='is_configurable']
                        pageelements:
                            advanced_attribute_properties_section: //*[@id='advanced_fieldset-wrapper']/*[@class='fieldset-wrapper-title']//span
                -
                    manage_labels_options: &productAttributeManageLabels
                        xpath: //a[@id='product_attribute_tabs_labels']
                        fieldsets:
                            -
                                manage_titles: &productAttributeManageTitles
                                    xpath: //*[@id='manage-titles-wrapper']
                                    fields:
                                        titles_by_store_name: //td[%storeViewNumber%]/input
                -
                    frontend_properties: &productAttributeFrontendProperties
                        xpath: //a[@id='product_attribute_tabs_front']
                        fieldsets:
                            -
                                frontend_properties: &productAttributeFrontendPropertiesFieldset
                                    xpath: //*[@id='front_fieldset']
                                    dropdowns:
                                        use_in_quick_search: //select[@id='is_searchable']
                                        use_in_advanced_search: //select[@id='is_visible_in_advanced_search']
                                        comparable_on_frontend: //select[@id='is_comparable']
                                        use_in_layered_navigation: //select[@id='is_filterable' and not(@disabled)]
                                        use_in_search_results_layered_navigation: //select[@id='is_filterable_in_search']
                                        use_for_promo_rule_conditions: //select[@id='is_used_for_promo_rules']
                                        enable_wysiwyg: //select[@id='is_wysiwyg_enabled' and not(@disabled)]
                                        allow_html_tags_on_frontend: //select[@id='is_html_allowed_on_front']
                                        visible_on_product_view_page_on_frontend: //select[@id='is_visible_on_front']
                                        used_in_product_listing: //select[@id='used_in_product_listing']
                                        used_for_sorting_in_product_listing: //select[@id='used_for_sort_by']
                                    fields:
                                        position: //input[@id='position']
        buttons:
            back: //button[@data-ui-id='attribute-edit-content-back-button']
            reset: //button[@data-ui-id='attribute-edit-content-reset-button']
            save_attribute: //button[@data-ui-id='attribute-edit-content-save-button']
            save_and_continue_edit: //button[@data-ui-id='attribute-edit-content-save-and-edit-button-button']
            save_in_new_attribute_set: //button[@id='save_in_new_set']
            close_window: //button[span='Close Window']
        messages: *productAttributeMessages

# Manage Product Attributes page
edit_product_attribute:
    mca: catalog_product_attribute/edit/attribute_id/%id%/
    title: %elementTitle% / Manage Attributes / Magento Admin
    uimap: &edit_product_attribute
        form: &editProductAttributeForm
            tabs:
                -
                    properties:
                        xpath: //a[@id='product_attribute_tabs_main']
                        fieldsets:
                            -
                                attribute_properties: *productAttributeProperties
                            -
                                manage_options:
                                    xpath: //div[@id='manage-options-panel']
                                    buttons:
                                        add_option: //button[@id='add_new_option_button']
                                        delete_option: //td[contains(input/@name,'option[delete][%fieldOptionNumber%]')]/button
                                    checkboxes:
                                        is_default: //input[@name='default[]' and @value='%fieldOptionNumber%']
                                        default_value: //tr[%rowNumber%]//input[@class='input-radio']
                                        default_value_by_option_name: //tr[td//input/@value='%optionName%']//input[@type='radio']
                                    fields:
                                        admin_option_name: //input[@name='option[value][%fieldOptionNumber%][0]' or @name='option[value][option_%fieldOptionNumber%][0]']
                                        admin_option_name_disabled: //tr[%rowNumber%]//input[@class='input-text required-option' and @disabled='disabled']
                                        options_by_store_name: //td[contains(input/@name,'option[value][%fieldOptionNumber%]')][%storeViewNumber%]/input
                                        option_orders: //tr/td[3]/input
                                    pageelements:
                                        manage_options_option: //*[@data-role='options-container']/tr
                                        is_default_option_index: //tr[%index%]//input[@class='input-radio']
                            -
                                advanced_attribute_properties: *productAttributeAdvancedProperties
                        pageelements:
                            advanced_attribute_properties_section: //*[@id='advanced_fieldset-wrapper']/*[@class='fieldset-wrapper-title']//span

                -
                    manage_labels_options: *productAttributeManageLabels
                -
                    frontend_properties: *productAttributeFrontendProperties
        buttons:
            back: //button[span='Back']
            reset: //button[span='Reset']
            delete_attribute: //button[span='Delete Attribute']
            save_attribute: //button[@data-ui-id='attribute-edit-content-save-button']
            save_and_continue_edit: //button[@data-ui-id='attribute-edit-content-save-and-edit-button-button']
        messages: *productAttributeMessages

# Add New Product Attribute from product page
new_product_attribute_from_product_page:
    mca: catalog_product_attribute/new/group/%tab%/store/%storeId%/type/%productType%/popup/1/?set=%setId%
    title: New Attribute / Manage Attributes / Magento Admin
    uimap:
        form:
            fieldsets:
                -
                    attribute_properties: *productAttributeProperties
                -
                    manage_options: *productAttributeManageOptions
                -
                    advanced_attribute_properties: *productAttributeAdvancedProperties
                -
                    manage_titles: *productAttributeManageTitles
                -
                    frontend_properties: *productAttributeFrontendPropertiesFieldset
        pageelements:
            advanced_attribute_properties_section: //*[@id='advanced_fieldset-wrapper']/*[@class='fieldset-wrapper-title']//span
            manage_titles_section: //*[@id='manage-titles-wrapper']/*[@class='fieldset-wrapper-title']//span
            frontend_properties_section: //*[@id='front_fieldset-wrapper']/*[@class='fieldset-wrapper-title']//span
        buttons:
            reset: //button[@id='reset']
            save_attribute: //button[@id='save']
            save_in_new_attribute_set: //button[@id='save_in_new_set']
        messages: *productAttributeMessages

edit_product_attribute_save_and_continue:
    mca: catalog_product_attribute/edit/attribute_id/%id%/back/edit/active_tab/%tab%
    title: ~
    uimap: *edit_product_attribute

new_product_attribute_save_and_continue:
    mca: catalog_product_attribute/edit/back/edit/active_tab/%tab%/
    title: New Attribute / Manage Attributes / Magento Admin
    uimap:
        form: *newProductAttributeForm

product_attribute:
    mca: catalog_product_attribute/edit/
    title: New Attribute / Manage Attributes / Magento Admin
    uimap:
        form: *newProductAttributeForm
        buttons:
            back: //button[span='Back']
            reset: //button[span='Reset']
            save_attribute: //button[@data-ui-id='attribute-edit-content-save-button']
            save_and_continue_edit: //button[@data-ui-id='attribute-edit-content-save-and-edit-button-button']
        messages: *productAttributeMessages
