# Magento
#
# {license_notice}
#
# @category    Magento
# @package     Magento
# @subpackage  functional_tests
# @copyright   {copyright}
# @license     {license_link}
#
---
#URL Rewrite pages

url_rewrite_management:
    mca: urlrewrite/
    click_xpath: //*[@id='nav']//a[contains(@href, 'urlrewrite/')]
    title: URL Redirects / SEO & Search / Marketing / Magento Admin
    uimap:
        form:
            fieldsets:
                -
                    url_rewrite_grid:
                        xpath: //div[@id='urlrewriteGrid']
                        buttons:
                            reset_filter: //button[span='Reset Filter']
                            search: //button[span='Search']
                        dropdowns:
                            view_per_page: //select[@name='limit']
                            filter_store_view: //select[@name='store_id']
                            filter_status: //select[@name='is_system']
                        fields:
                            page: //input[@name='page']
                            filter_url_rewrite_id: //input[@name='url_rewrite_id']
                            filter_id_path: //input[@name='id_path']
                            filter_request_path: //input[@name='request_path']
                            filter_target_path: //input[@name='target_path']
                            filter_options: //input[@name='options']
                        pageelements:
                            page_grid_head: //div[@id='urlrewriteGrid']//thead/tr[@class='headings']
                            page_grid: //table[@id='urlrewriteGrid_table']
        buttons:
            add_new_rewrite: //button[span='Add URL Rewrite']
        messages: &pageMessages
            success_saved_url_rewrite: //li[normalize-space(@class)='success-msg' and contains(.,'The URL Rewrite has been saved.')]
            success_deleted_url_rewrite: //li[normalize-space(@class)='success-msg' and contains(.,'The URL Rewrite has been deleted.')]
            id_path_exist: //li[normalize-space(@class)='error-msg' and contains(.,'ID Path for Specified Store already exists.')]
            req_path_exist: //li[normalize-space(@class)='error-msg' and contains(.,'Request Path for Specified Store already exists.')]
            confirmation_for_delete: Are you sure you want to do this?

add_new_urlrewrite_category:
    mca: urlrewrite/edit/category/
    title: "[New/Edit] URL Redirect / URL Redirects / SEO & Search / Marketing / Magento Admin"
    uimap:
        form:
            fieldsets:
                -
                    category_rewrite:
                        xpath: //*[@id='base_fieldset']
                        fields:
                            request_path: //input[@id='request_path']
                -
                    select_category:
                        xpath: //fieldset[legend/span='Select Category']
                        links:
                            root_category: //ul/div/li/div/a[contains(span,'%rootName%')]
#                           Don't delete this xpath
#                           sub_category: //*[@id='%parentCategoryId%']/ancestor::li/ul/li[contains(div/a/span,'%subName%') and not(div/a/span/@id='%parentCategoryId%')]
                            sub_category: //ul[@class='x-tree-node-ct']/li/div/a[contains(span,'%subName%')]
                            expand_category: //*[@id='%parentCategoryId%']/ancestor::div/img[contains(@class,'x-tree-elbow-plus') or contains(@class,'x-tree-elbow-end-plus')]
        dropdowns:
            create_url_rewrite_dropdown: //select[@class='select']
        buttons:
            back: //button[span='Back']
            save: //button[@id='save']
        messages: *pageMessages

add_new_urlrewrite_product:
    mca: urlrewrite/edit/product/
    title: "[New/Edit] URL Redirect / URL Redirects / SEO & Search / Marketing / Magento Admin"
    uimap:
        form:
            fieldsets:
                -
                    product_rewrite:
                        xpath: //div[@id='productGrid']
                        buttons:
                            reset_filter: //button[span='Reset Filter']
                            search: //button[span='Search']
                        dropdowns:
                            view_per_page: //select[@name='limit']
                            filter_status: //select[@name='status']
                            create_url_rewrite_dropdown: //select[@class='select']
                        fields:
                            page: //input[@name='page']
                            filter_product_id: //input[@name='entity_id']
                            filter_product_name: //input[@name='name']
                            filter_sku: //input[@name='sku']
                        pageelements:
                            page_grid_head: //div[@id='productGrid']//thead/tr[@class='headings']
        buttons:
            back: //button[span='Back']
            save: //button[@id='save']
        messages: *pageMessages

urlrewrite_product_category_selection:
    mca: urlrewrite/edit/product/%id%/category/
    title: "[New/Edit] URL Redirect / URL Redirects / SEO & Search / Marketing / Magento Admin"
    uimap:
        form:
            fieldsets:
                -
                    product_rewrite:
                        xpath: //fieldset[legend/span='Select Category']
                        links:
                            root_category: //ul/div/li/div/a[contains(span,'%rootName%')]
                            sub_category: //*[@id='%parentCategoryId%']/ancestor::li/ul/li[contains(div/a/span,'%subName%') and not(div/a/span/@id='%parentCategoryId%')]
                            expand_category: //*[@id='%parentCategoryId%']/ancestor::div/img[contains(@class,'x-tree-elbow-plus') or contains(@class,'x-tree-elbow-end-plus')]
        buttons:
            skip_category_selection: //button[span='Skip Category Selection']

urlrewrite_custom:
    mca: urlrewrite/edit/id/
    title: "[New/Edit] URL Redirect / URL Redirects / SEO & Search / Marketing / Magento Admin"
    uimap:
        form: &new_url_rewrite
            fieldsets:
                -
                    custom_rewrite:
                        xpath: //*[@id='base_fieldset']
                        dropdowns:
                            request_store: //select[@name='store_id']
                            target-store: //select[@name='target_store_id']
                            redirect: //select[@name='options']
                            create_url_rewrite_dropdown: //select[@class='select']
                        fields:
                            id_path: //input[@id='id_path']
                            request_path: //input[@name='request_path']
                            target_path: //input[@name='target_path']
                            description: //textarea[@id='description']
        buttons:
            save: //button[@id='save']
            back: //button[span='Back']
        messages: *pageMessages

edit_urlrewrite_product:
    mca: urlrewrite/edit/product/%id%/category/%categoryId%/
    title: "[New/Edit] URL Redirect / URL Redirects / SEO & Search / Marketing / Magento Admin"
    uimap:
        form: *new_url_rewrite
        buttons:
            save: //button[@id='save']
            back: //button[span='Back']
        messages: *pageMessages

edit_urlrewrite_product_skip_category:
    mca: urlrewrite/edit/product/%id%/
    title: "[New/Edit] URL Redirect / URL Redirects / SEO & Search / Marketing / Magento Admin"
    uimap:
        form: *new_url_rewrite

edit_urlrewrite_category:
    mca: urlrewrite/edit/category/%id%/
    title: "[New/Edit] URL Redirect / URL Redirects / SEO & Search / Marketing / Magento Admin"
    uimap:
        form: *new_url_rewrite
        buttons:
            save: //button[@id='save']
            back: //button[span='Back']

edit_urlrewrite_custom:
    mca: urlrewrite/edit/id/%id%/
    title: "[New/Edit] URL Redirect / URL Redirects / SEO & Search / Marketing / Magento Admin"
    uimap:
        form: *new_url_rewrite
        buttons:
            save: //button[@id='save']
            back: //button[span='Back']
        messages: *pageMessages
