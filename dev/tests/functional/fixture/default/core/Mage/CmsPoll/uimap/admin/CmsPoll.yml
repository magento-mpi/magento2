#
# {license_notice}
#
# @category    Magento
# @package     Mage_CmsPoll
# @subpackage  functional_tests
# @copyright   {copyright}
# @license     {license_link}
#
---
# Poll Manager page
poll_manager:
    mca: poll/
    click_xpath: //ul[@id='nav']//a[contains(@href, '/poll/')]
    title: Polls / Elements / Content / Magento Admin
    uimap:
        form: &searchPoll
            fieldsets:
                -
                    poll_grid:
                        xpath: //div[@id='pollGrid']
                        buttons:
                            reset_filter: //button[span='Reset Filter']
                            search: //button[span='Search']
                        dropdowns:
                            filter_visible_in: //select[@name='visible_in']
                            filter_status: //select[@name='closed']
                        fields:
                            filter_id: //input[@name='poll_id']
                            filter_question: //input[@name='poll_title']
                            filter_number_of_responses_from: //input[@name='votes_count[from]']
                            filter_umber_of_responses_to: //input[@name='votes_count[to]']
                            filter_date_posted_from: //input[@name='date_posted[from]']
                            filter_date_posted_to: //input[@name='date_posted[to]']
                            filter_date_closed_from: //input[@name='date_closed[from]']
                            filter_date_closed_to: //input[@name='date_closed[to]']
                        pageelements:
                            poll_grid_head: //*[@id='pollGrid_table']/thead/tr[@class='headings']
        buttons:
            add_new_poll: //button[span='Add New Poll']
        messages: &pollMesssages
            success_saved_poll: //li[normalize-space(@class)='success-msg' and contains(.,'You saved the poll.')]
            success_deleted_poll: //li[normalize-space(@class)='success-msg' and contains(.,'You deleted the poll.')]
            existing_poll: //li[normalize-space(@class)='error-msg' and contains(.,'Poll with the same question already exists.')]
            duplicate_poll_answer: //li[normalize-space(@class)='error-msg' and contains(.,'Your answers contain duplicates.')]
            add_answers: //li[normalize-space(@class)='error-msg' and contains(.,'Please enter answer options for this poll.')]
            confirmation_for_delete: Are you sure you want to do this?

# Add New Poll page
new_poll:
    mca: poll/new/
    title: New Poll / Polls / Elements / Content / Magento Admin
    uimap:
        form: &newPollCreationForm
            tabs:
                -
                    poll_information: &pollInformationTab
                        xpath: //a[@title='Poll Information']
                        fieldsets:
                            -
                                information:
                                    xpath: //fieldset[@id='poll_form']
                                    dropdowns:
                                        poll_status: //select[@id='closed']
                                    fields:
                                        poll_question: //input[@id='poll_title']
                                    multiselects:
                                        visible_in: //select[@name='store_ids[]']
                -
                    poll_answers: &pollAnswersTab
                        xpath: //a[@title='Poll Answers']
                        fieldsets:
                            -
                                assigned_answers:
                                    xpath: //div[@data-ui-id='poll-edit-tabs-tab-content-answers-section']
                                    buttons:
                                        add_new_answer: //button[span='Add New Answer']
                                    pageelements:
                                        assigned_answers_block: //tr[@id='poll_answer_item_%answerId%']
                            -
                                assigned_answers_set:
                                    xpath: //tbody[@id='poll_answers_list']/tr
                                    fields:
                                        answer_title: //input[@name='answer[%answerId%][title]']
                                        votes_count: //input[@name='answer[%answerId%][votes]']
#                                    buttons:
#@TODO need to implement xPath for this element
#                                        delete: //tr[@id='poll_answer_item_%answerId%']//button[@data-ui-id='poll-edit-tab-answers-list-deletebutton']=======
#                                        delete: //button[span='Delete']
        buttons:
            back: //button[span='Back']
            reset: //button[span='Reset']
            save_poll: //button[@data-ui-id='poll-edit-save-button']
        messages: *pollMesssages

# Edit Poll page
edit_poll:
    mca: poll/edit/id/%id%/
    title: %elementTitle% / Polls / Elements / Content / Magento Admin
    uimap:
        form:
            tabs:
                -
                    poll_information: *pollInformationTab
                -
                    poll_answers: *pollAnswersTab
        buttons:
            back: //button[span='Back']
            reset: //button[span='Reset']
            delete_poll: //button[span='Delete Poll']
            save_poll: //button[@data-ui-id='poll-edit-save-button']
        messages: *pollMesssages
